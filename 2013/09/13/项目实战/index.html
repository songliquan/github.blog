
 <!DOCTYPE HTML>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
  
    <title>项目总结 | Bloging</title>
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=3, minimum-scale=1">
    
    <meta name="author" content="Mr Song">
    
    <meta name="description" content="项目总结tabBar默认显示蓝色的文字和图片
如果想显示自己的图片和文字，可以指定图片的渲染方式为原始方式image = [image imageWithRenderingMode:UIImageRenderingModeAlwaysOriginal]
还可以在../images.xcassets中">
    
    
    
    
    
    <link rel="icon" href="/img/favicon.ico">
    
    
    <link rel="apple-touch-icon" href="/img/pacman.jpg">
    <link rel="apple-touch-icon-precomposed" href="/img/pacman.jpg">
    
    <link rel="stylesheet" href="/css/style.css" type="text/css">
</head>

  <body>
    <header>
      <div>
		
			<div id="imglogo">
				<a href="/"><img src="/img/logo.svg" alt="Bloging" title="Bloging"/></a>
			</div>
			
			<div id="textlogo">
				<h1 class="site-name"><a href="/" title="Bloging">Bloging</a></h1>
				<h2 class="blog-motto"></h2>
			</div>
			<div class="navbar"><a class="navbutton navmobile" href="#" title="菜单">
			</a></div>
			<nav class="animated">
				<ul>
					
						<li><a href="/">主页</a></li>
					
						<li><a href="/archives">存档</a></li>
					
					<li>
					
					<form class="search" action="//google.com/search" method="get" accept-charset="utf-8">
						<label>Search</label>
						<input type="text" id="search" name="q" autocomplete="off" maxlength="20" placeholder="搜索" />
						<input type="hidden" name="q" value="site:yoursite.com">
					</form>
					
					</li>
				</ul>
			</nav>			
</div>

    </header>
    <div id="container">
      <div id="main" class="post" itemscope itemprop="blogPost">
	<article itemprop="articleBody"> 
		<header class="article-info clearfix">
  <h1 itemprop="name">
    
      <a href="/2013/09/13/项目实战/" title="项目总结" itemprop="url">项目总结</a>
  </h1>
  <p class="article-author">By
    
      <a href="http://yoursite.com" title="Mr Song">Mr Song</a>
    </p>
  <p class="article-time">
    <time datetime="2013-09-13T06:48:09.000Z" itemprop="datePublished">2013-09-13</time>
    更新日期:<time datetime="2015-09-27T04:35:18.000Z" itemprop="dateModified">2015-09-27</time>
    
  </p>
</header>
	<div class="article-content">
		
		
		<div id="toc" class="toc-article">
			<strong class="toc-title">文章目录</strong>
		<ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#项目总结"><span class="toc-number">1.</span> <span class="toc-text">项目总结</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#tabBar默认显示蓝色的文字和图片"><span class="toc-number">1.1.</span> <span class="toc-text">tabBar默认显示蓝色的文字和图片</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#appearance属性"><span class="toc-number">1.2.</span> <span class="toc-text">appearance属性</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#自定义tabBar"><span class="toc-number">1.3.</span> <span class="toc-text">自定义tabBar</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#自定义UIView工具类"><span class="toc-number">2.</span> <span class="toc-text">自定义UIView工具类</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#设置所有的子控制器的返回按钮样式一致"><span class="toc-number">2.1.</span> <span class="toc-text">设置所有的子控制器的返回按钮样式一致</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#自定义cell"><span class="toc-number">2.2.</span> <span class="toc-text">自定义cell</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#键盘处理"><span class="toc-number">2.3.</span> <span class="toc-text">键盘处理</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#问题"><span class="toc-number">2.4.</span> <span class="toc-text">问题</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#登陆注册"><span class="toc-number">2.5.</span> <span class="toc-text">登陆注册</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#设置状态栏"><span class="toc-number">2.5.1.</span> <span class="toc-text">设置状态栏</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#自定义按钮"><span class="toc-number">2.5.2.</span> <span class="toc-text">自定义按钮</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#登陆界面"><span class="toc-number">2.5.3.</span> <span class="toc-text">登陆界面</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#占位文字颜色设置"><span class="toc-number">2.5.4.</span> <span class="toc-text">占位文字颜色设置</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#更新推送通知"><span class="toc-number">2.5.5.</span> <span class="toc-text">更新推送通知</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#精华模块"><span class="toc-number">2.6.</span> <span class="toc-text">精华模块</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#时间显示"><span class="toc-number">2.6.1.</span> <span class="toc-text">时间显示</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#精华模块-1"><span class="toc-number">2.7.</span> <span class="toc-text">精华模块</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#加号按钮动画效果"><span class="toc-number">2.7.1.</span> <span class="toc-text">加号按钮动画效果</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#UIDynamic_物理引擎"><span class="toc-number">2.8.</span> <span class="toc-text">UIDynamic 物理引擎</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#声音界面"><span class="toc-number">2.8.1.</span> <span class="toc-text">声音界面</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#视频界面"><span class="toc-number">2.8.2.</span> <span class="toc-text">视频界面</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#评论功能"><span class="toc-number">2.8.3.</span> <span class="toc-text">评论功能</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2015-8-3"><span class="toc-number">2.8.4.</span> <span class="toc-text">2015-8-3</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#menuController"><span class="toc-number">2.8.4.1.</span> <span class="toc-text">menuController</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#圆形头像"><span class="toc-number">2.8.4.2.</span> <span class="toc-text">圆形头像</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#第二次选中tabBar时刷新控制器"><span class="toc-number">2.8.5.</span> <span class="toc-text">第二次选中tabBar时刷新控制器</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#新帖模块"><span class="toc-number">2.8.6.</span> <span class="toc-text">新帖模块</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#我的模块"><span class="toc-number">2.8.7.</span> <span class="toc-text">我的模块</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#网页加载进度条"><span class="toc-number">2.8.7.1.</span> <span class="toc-text">网页加载进度条</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#2015-8-5"><span class="toc-number">2.9.</span> <span class="toc-text">2015-8-5</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#自定义UITextField（增加占位文字功能）"><span class="toc-number">2.9.1.</span> <span class="toc-text">自定义UITextField（增加占位文字功能）</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#2015-8-6"><span class="toc-number">2.10.</span> <span class="toc-text">2015-8-6</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#上午(视频再看一遍)"><span class="toc-number">2.10.1.</span> <span class="toc-text">上午(视频再看一遍)</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#app换肤功能"><span class="toc-number">2.10.2.</span> <span class="toc-text">app换肤功能</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#下午（视频看一遍）"><span class="toc-number">2.10.3.</span> <span class="toc-text">下午（视频看一遍）</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#2015-8-7"><span class="toc-number">2.11.</span> <span class="toc-text">2015-8-7</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#上午"><span class="toc-number">2.11.1.</span> <span class="toc-text">上午</span></a></li></ol></li></ol></li></ol>
		</div>
		
		<h1 id="项目总结">项目总结</h1><h2 id="tabBar默认显示蓝色的文字和图片">tabBar默认显示蓝色的文字和图片</h2><ul>
<li>如果想显示自己的图片和文字，可以指定图片的渲染方式为原始方式<br><code>image = [image imageWithRenderingMode:UIImageRenderingModeAlwaysOriginal]</code></li>
<li>还可以在<code>../images.xcassets</code>中设置图片的渲染方式为原始。</li>
</ul>
<h2 id="appearance属性">appearance属性</h2><ul>
<li>如果想统一设置tabBar的某些属性，可以使用appearance属性来设置<ul>
<li>通过appearance统一设置所有UITabBarItem的文字属性</li>
<li>后面带有<code>UI_APPEARANCE_SELECTOR</code>的方法, 都可以通过appearance对象来统一设置`</li>
</ul>
</li>
</ul>
<figure class="highlight objc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">UITabBarItem</span> *item = [<span class="built_in">UITabBarItem</span> appearance];</span><br><span class="line"></span><br><span class="line"><span class="built_in">NSMutableDictionary</span> *dict = [<span class="built_in">NSMutableDictionary</span> dictionary];</span><br><span class="line">dict[<span class="built_in">NSFontAttributeName</span>] = [<span class="built_in">UIFont</span> systemFontOfSize:<span class="number">12</span>];</span><br><span class="line">dict[<span class="built_in">NSForegroundColorAttributeName</span>] = [<span class="built_in">UIColor</span> grayColor];</span><br><span class="line">[item setTitleTextAttributes:dict forState:<span class="built_in">UIControlStateNormal</span>];</span><br><span class="line"></span><br><span class="line"><span class="built_in">NSMutableDictionary</span> *dictSelected = [<span class="built_in">NSMutableDictionary</span> dictionary];</span><br><span class="line">dictSelected[<span class="built_in">NSFontAttributeName</span>] = [<span class="built_in">UIFont</span> systemFontOfSize:<span class="number">12</span>];</span><br><span class="line">dictSelected[<span class="built_in">NSForegroundColorAttributeName</span>] = [<span class="built_in">UIColor</span> darkGrayColor];</span><br><span class="line">[item setTitleTextAttributes:dictSelected forState:<span class="built_in">UIControlStateSelected</span>];</span><br></pre></td></tr></table></figure>
<h2 id="自定义tabBar">自定义tabBar</h2><ul>
<li>系统自带的tabBar不能满足需求</li>
<li>自己定义UITabBar<ul>
<li>自定义一个类继承自UITabBar</li>
<li>实现initWithFrame和layoutSubviews方法即可。</li>
</ul>
</li>
</ul>
<p><img src="../images/屏幕快照 2015-07-22 21.00.27.png" alt=""></p>
<h1 id="自定义UIView工具类">自定义UIView工具类</h1><ul>
<li>因为要经常获取控件的frame、height等属性进行设置，这里对UIView写一个分类，添加一些自定义的setter和getter方法</li>
<li>这样做得依据是<ul>
<li>分类中声明@property, 只会生成方法的声明, 不会生成方法的实现和带有_下划线的成员变量</li>
<li>所以可以直接写几个关于这个常用属性的方法</li>
</ul>
</li>
</ul>
<h2 id="设置所有的子控制器的返回按钮样式一致">设置所有的子控制器的返回按钮样式一致</h2><p><img src="../images/屏幕快照 2015-07-22 23.53.38.png" alt=""></p>
<figure class="highlight objc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//#import "SLQNavigationController.h"</span></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">@implementation</span> <span class="title">SLQNavigationController</span></span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 自定义导航控制器，在弹出窗口之前设置返回按钮样式。</span></span><br><span class="line"><span class="comment">// 每一个控制器弹出之前都会调用这个方法，所以可以保证所有的控制器的返回按钮样式一致。</span></span><br><span class="line">- (<span class="keyword">void</span>)pushViewController:(<span class="built_in">UIViewController</span> *)viewController animated:(<span class="built_in">BOOL</span>)animated</span><br><span class="line">&#123;</span><br><span class="line">    <span class="comment">// 判断是不是第一个控制器，如果不是就设置返回按钮</span></span><br><span class="line">    <span class="keyword">if</span> (<span class="keyword">self</span><span class="variable">.childViewControllers</span><span class="variable">.count</span> &gt; <span class="number">0</span>) &#123;</span><br><span class="line">        <span class="built_in">UIButton</span> *backBtn = [<span class="built_in">UIButton</span> buttonWithType:<span class="built_in">UIButtonTypeCustom</span>];</span><br><span class="line">        <span class="comment">// 设置图片</span></span><br><span class="line">        [backBtn setImage:[<span class="built_in">UIImage</span> imageNamed:<span class="string">@"navigationButtonReturn"</span>] forState:<span class="built_in">UIControlStateNormal</span>];</span><br><span class="line">        [backBtn setImage:[<span class="built_in">UIImage</span> imageNamed:<span class="string">@"navigationButtonReturnClick"</span>] forState:<span class="built_in">UIControlStateHighlighted</span>];</span><br><span class="line">        [backBtn setTitle:<span class="string">@"返回"</span> forState:<span class="built_in">UIControlStateNormal</span>];</span><br><span class="line">        <span class="comment">// 让按钮内部的所有内容左对齐</span></span><br><span class="line">        backBtn<span class="variable">.contentHorizontalAlignment</span> = <span class="built_in">UIControlContentHorizontalAlignmentLeft</span>;</span><br><span class="line"></span><br><span class="line">        backBtn<span class="variable">.size</span> = <span class="built_in">CGSizeMake</span>(<span class="number">70</span>, <span class="number">30</span>);</span><br><span class="line">        <span class="comment">// 文字颜色</span></span><br><span class="line">        [backBtn setTitleColor:[<span class="built_in">UIColor</span> blackColor] forState:<span class="built_in">UIControlStateNormal</span>];</span><br><span class="line">        [backBtn setTitleColor:[<span class="built_in">UIColor</span> redColor] forState:<span class="built_in">UIControlStateHighlighted</span>];</span><br><span class="line">        <span class="comment">// 设置内边距，使得按钮紧靠边</span></span><br><span class="line">        [backBtn setContentEdgeInsets:<span class="built_in">UIEdgeInsetsMake</span>(<span class="number">0</span>, -<span class="number">15</span>, <span class="number">0</span>, <span class="number">0</span>)];</span><br><span class="line"></span><br><span class="line">        [backBtn addTarget:<span class="keyword">self</span> action:<span class="keyword">@selector</span>(back) forControlEvents:<span class="built_in">UIControlEventTouchUpInside</span>];</span><br><span class="line"></span><br><span class="line">        viewController<span class="variable">.navigationItem</span><span class="variable">.leftBarButtonItems</span> = @[</span><br><span class="line">                                                             [[<span class="built_in">UIBarButtonItem</span> alloc] initWithCustomView:backBtn]</span><br><span class="line">                                                             ];</span><br><span class="line">        <span class="comment">// 隐藏tabBar</span></span><br><span class="line">        viewController<span class="variable">.hidesBottomBarWhenPushed</span> = <span class="literal">YES</span>;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// 设置过控制器后再弹出</span></span><br><span class="line">    <span class="comment">// 这句super的push要放在后面, 让viewController可以覆盖上面设置的leftBarButtonItem</span></span><br><span class="line">    [<span class="keyword">super</span> pushViewController:viewController animated:animated];</span><br><span class="line">&#125;</span><br><span class="line">- (<span class="keyword">void</span>)back</span><br><span class="line">&#123;</span><br><span class="line">    [<span class="keyword">self</span> popViewControllerAnimated:<span class="literal">YES</span>];</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">@end</span></span><br></pre></td></tr></table></figure>
<h2 id="自定义cell">自定义cell</h2><ul>
<li>cell被选中时其内部子控件会进入高亮状态，但是当将cell的属性selecte设置为none时，就不会显示高亮状态<br>I- 左边cell保存右边cell的用户数据，解决重复发生请求问题</li>
<li>添加cell左右间隔<ul>
<li>添加一个空白的UIView</li>
<li>1、将所有子控件添加到一个UIView中，并且设置大小小于cell</li>
<li>2、调整cell的contentView</li>
<li>3、直接调整cell的frame<ul>
<li>直接修改不起作用，重新setFrame方法</li>
<li>修改x值，width和height</li>
<li>重写setFrame和setBounds方法可以保证自己的控件始终大小如一，别人无法修改。</li>
</ul>
</li>
</ul>
</li>
<li><p>表格刷新</p>
<ul>
<li><p>header</p>
<ul>
<li>首次进入时刷新一次</li>
<li>然后每次下拉刷新时刷新一次<ul>
<li>刷新之前清空user数组</li>
</ul>
</li>
</ul>
</li>
<li><p>footer</p>
<ul>
<li>每次选中左边cell时就判断footer是否显示</li>
<li>主要是根据用户数量和服务器返回的总数比较得出</li>
<li>如果加载完毕就显示noMoreData</li>
<li>否则就停止刷新状态，等待用户再次刷新</li>
</ul>
</li>
</ul>
</li>
<li>问题<ul>
<li>1、重复下载数据 解决方法：判断用户数量是否大于0</li>
<li>2、网络延迟带来的细节问题：点击左边某个cell后，右边tableView会显示残留数据</li>
<li>解决方法:如果要重新下载数据，那么先刷新表格，显示当前cell对应的最新用户数据</li>
<li>3、关于加载第二页数据的问题</li>
<li>解决方法：记录当前的页码，根据页码加载数据，页码的大小不是关键，关键在于footer的状态</li>
<li>4、重复发送请求</li>
<li>解决方法：通过记录最新的参数列表来判断是不是最新的请求，如果不是就把数据保存起来，以备下次使用，是的话就刷新表格了</li>
</ul>
</li>
</ul>
<h2 id="键盘处理">键盘处理</h2><ul>
<li>inputView</li>
<li>设置文本输入框的属性<code>return key</code> :</li>
<li>监听键盘中<code>右下角按键</code>的点击，设置代理：<code>shouldReturn</code></li>
<li>自定义键盘<ul>
<li>修改属性<code>inputView</code></li>
<li>工具条(键盘顶部)：<code>inputAccessoryView</code><ul>
<li><code>UIToolBar</code></li>
</ul>
</li>
</ul>
</li>
<li>File’s Owner<ul>
<li>Owner : 监听对象（xib中class要和监听对象一致）</li>
<li>加载xib指定owner</li>
<li>指定Owner的话，耦合性太强，自定义UIToolBar解耦</li>
</ul>
</li>
<li>自定义<code>UIToolBar</code><ul>
<li>设置代理或者通知来处理点击事件</li>
</ul>
</li>
</ul>
<h2 id="问题">问题</h2><ul>
<li>1、忘记设置数据源<ul>
<li>tableView一直不显示数据<h2 id="登陆注册">登陆注册</h2></li>
</ul>
</li>
</ul>
<h3 id="设置状态栏">设置状态栏</h3><figure class="highlight objc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">typedef</span> <span class="built_in">NS_ENUM</span>(<span class="built_in">NSInteger</span>, <span class="built_in">UIStatusBarStyle</span>) &#123;</span><br><span class="line">    <span class="built_in">UIStatusBarStyleDefault</span>                                     = <span class="number">0</span>, <span class="comment">// Dark content, for use on light backgrounds</span></span><br><span class="line">    <span class="built_in">UIStatusBarStyleLightContent</span>     <span class="built_in">NS_ENUM_AVAILABLE_IOS</span>(<span class="number">7</span>_0) = <span class="number">1</span>, <span class="comment">// Light content, for use on dark backgrounds</span></span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span><br><span class="line"> *	设置状态栏显示状态</span><br><span class="line"> */</span></span><br><span class="line">- (<span class="built_in">UIStatusBarStyle</span>)preferredStatusBarStyle&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="built_in">UIStatusBarStyleLightContent</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="自定义按钮">自定义按钮</h3><ul>
<li>这个改变任意，只需在layoutSubviews里改变frame即可</li>
</ul>
<h3 id="登陆界面">登陆界面</h3><ul>
<li><p>显示按钮背景图片圆角</p>
<ul>
<li>代码<figure class="highlight objc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 显示圆角</span></span><br><span class="line"> <span class="keyword">self</span><span class="variable">.view</span><span class="variable">.layer</span><span class="variable">.cornerRadius</span> = <span class="number">5</span>;</span><br><span class="line"> <span class="keyword">self</span><span class="variable">.view</span><span class="variable">.layer</span><span class="variable">.masksToBounds</span> = <span class="literal">YES</span>;</span><br></pre></td></tr></table></figure>
</li>
</ul>
</li>
<li><p>XIB中kvc设置</p>
</li>
</ul>
<h3 id="占位文字颜色设置">占位文字颜色设置</h3><pre><code>- <span class="function"><span class="title">UIColor</span><span class="params">(不行)</span></span>
- <span class="function"><span class="title">attribute</span><span class="params">(可以)</span></span>
</code></pre><ul>
<li><p>富文本显示</p>
  <figure class="highlight objc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"> <span class="built_in">NSMutableDictionary</span> *dict = [<span class="built_in">NSMutableDictionary</span> dictionary];</span><br><span class="line">dict[<span class="built_in">NSForegroundColorAttributeName</span>] = [<span class="built_in">UIColor</span> redColor];</span><br><span class="line"><span class="built_in">NSMutableAttributedString</span> *attr = [[<span class="built_in">NSMutableAttributedString</span> alloc] initWithString:<span class="string">@"手机号"</span> attributes:dict];</span><br><span class="line">[attr addAttributes:@&#123;<span class="built_in">NSForegroundColorAttributeName</span> : [<span class="built_in">UIColor</span> whiteColor] &#125; range:<span class="built_in">NSMakeRange</span>(<span class="number">0</span>, <span class="number">1</span>)];</span><br><span class="line">[attr addAttributes:@&#123;<span class="built_in">NSForegroundColorAttributeName</span> : [<span class="built_in">UIColor</span> redColor],</span><br><span class="line">                      <span class="built_in">NSFontAttributeName</span> : [<span class="built_in">UIFont</span> systemFontOfSize:<span class="number">30</span>]</span><br><span class="line">                      &#125; range:<span class="built_in">NSMakeRange</span>(<span class="number">1</span>, <span class="number">1</span>)];</span><br><span class="line">[attr addAttributes:@&#123;<span class="built_in">NSForegroundColorAttributeName</span> : [<span class="built_in">UIColor</span> greenColor] &#125; range:<span class="built_in">NSMakeRange</span>(<span class="number">1</span>, <span class="number">1</span>)];</span><br><span class="line"><span class="keyword">self</span><span class="variable">.phoneField</span><span class="variable">.attributedPlaceholder</span> = attr;</span><br></pre></td></tr></table></figure>
</li>
<li><p>运行时时获取</p>
</li>
</ul>
<figure class="highlight objc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//#import &lt;objc/runtime.h&gt;</span></span><br><span class="line"> <span class="keyword">unsigned</span> <span class="keyword">int</span> count = <span class="number">0</span>;</span><br><span class="line">   <span class="comment">// 获取所有隐藏属性</span></span><br><span class="line">   Ivar *ivas = class_copyIvarList([<span class="built_in">UITextField</span> class], &amp;count);</span><br><span class="line">   <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span> ; i &lt; count ; i ++)</span><br><span class="line">   &#123;</span><br><span class="line">       Ivar iv = *(ivas + i);</span><br><span class="line">       <span class="comment">// _placeholderLabel</span></span><br><span class="line">       SLQLog(<span class="string">@"%s"</span>,ivar_getName(iv));</span><br><span class="line">   &#125;</span><br><span class="line">   <span class="comment">// 释放</span></span><br><span class="line">   free(ivas);</span><br></pre></td></tr></table></figure>
<ul>
<li>如果想在进入输入状态时显示不同的文字状态</li>
</ul>
<figure class="highlight objc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">- (<span class="keyword">void</span>)awakeFromNib</span><br><span class="line">&#123;</span><br><span class="line"><span class="comment">//    [self setValue:[UIColor whiteColor] forKeyPath:@"_placeholderLabel.textColor"];</span></span><br><span class="line">    <span class="comment">// 设置占位符颜色</span></span><br><span class="line">    <span class="keyword">self</span><span class="variable">.tintColor</span> = <span class="keyword">self</span><span class="variable">.textColor</span>;</span><br><span class="line">    [<span class="keyword">self</span> resignFirstResponder];</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/**</span><br><span class="line"> *	进入编辑状态，显示白色文字背景</span><br><span class="line"> */</span></span><br><span class="line">- (<span class="built_in">BOOL</span>)becomeFirstResponder</span><br><span class="line">&#123;</span><br><span class="line">    [<span class="keyword">self</span> setValue:<span class="keyword">self</span><span class="variable">.textColor</span> forKeyPath:<span class="string">@"_placeholderLabel.textColor"</span>];</span><br><span class="line">    <span class="keyword">return</span> [<span class="keyword">super</span> becomeFirstResponder];</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/**</span><br><span class="line"> *	退出编辑状态，显示默认背景</span><br><span class="line"> */</span></span><br><span class="line">- (<span class="built_in">BOOL</span>)resignFirstResponder</span><br><span class="line">&#123;</span><br><span class="line">    [<span class="keyword">self</span> setValue:[<span class="built_in">UIColor</span> grayColor] forKeyPath:<span class="string">@"_placeholderLabel.textColor"</span>];</span><br><span class="line">    <span class="keyword">return</span> [<span class="keyword">super</span> resignFirstResponder];</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="更新推送通知">更新推送通知</h3><ul>
<li>根据版本决定是否显示提示界面</li>
</ul>
<figure class="highlight objc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span><br><span class="line"> *	关闭推送通知</span><br><span class="line"> */</span></span><br><span class="line">- (<span class="keyword">IBAction</span>)closePushView:(<span class="keyword">id</span>)sender &#123;</span><br><span class="line">    [<span class="keyword">self</span> removeFromSuperview];</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/**</span><br><span class="line"> *	是否显示窗口</span><br><span class="line"> */</span></span><br><span class="line">+ (<span class="keyword">void</span>)show</span><br><span class="line">&#123;</span><br><span class="line">    <span class="comment">// 判断是否是最新版本</span></span><br><span class="line">    <span class="comment">// 获取当前软件的版本号</span></span><br><span class="line">    <span class="built_in">NSString</span> *currentVersion = [<span class="built_in">NSBundle</span> mainBundle]<span class="variable">.infoDictionary</span>[<span class="string">@"CFBundleShortVersionString"</span>];</span><br><span class="line">    <span class="comment">// 获取沙盒中存储的版本号</span></span><br><span class="line">    <span class="built_in">NSString</span> *sanboxVersion = [[<span class="built_in">NSUserDefaults</span> standardUserDefaults] stringForKey:<span class="string">@"CFBundleShortVersionString"</span>];</span><br><span class="line">    <span class="keyword">if</span> (![sanboxVersion isEqualToString:currentVersion]) &#123;</span><br><span class="line">         <span class="comment">// 显示通知界面</span></span><br><span class="line">        <span class="built_in">UIWindow</span> *window = [[<span class="built_in">UIApplication</span> sharedApplication] keyWindow];</span><br><span class="line">        SLQPushGuideView *pushView = [SLQPushGuideView pushGuideView];</span><br><span class="line">        pushView<span class="variable">.frame</span> = window<span class="variable">.bounds</span>;</span><br><span class="line">        [window addSubview:pushView];</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 保存版本号</span></span><br><span class="line">        [[<span class="built_in">NSUserDefaults</span> standardUserDefaults] setObject:currentVersion forKey:<span class="string">@"CFBundleShortVersionString"</span>];</span><br><span class="line">        <span class="comment">// 立即写入</span></span><br><span class="line">        [[<span class="built_in">NSUserDefaults</span> standardUserDefaults ] synchronize];</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/**</span><br><span class="line"> *	返回对象</span><br><span class="line"> */</span></span><br><span class="line">+ (instancetype)pushGuideView</span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">return</span>  [[[<span class="built_in">NSBundle</span> mainBundle] loadNibNamed:<span class="built_in">NSStringFromClass</span>(<span class="keyword">self</span>) owner:<span class="literal">nil</span> options:<span class="literal">nil</span>] lastObject];</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>-</p>
<h2 id="精华模块">精华模块</h2><ul>
<li>使用一个cell，显示不同界面的信息（4个）)</li>
</ul>
<ul>
<li>段子<ul>
<li>中间只显示一串文字</li>
<li>上拉刷新和下拉刷新</li>
<li>刷新成功与失败注意页码状态的切换</li>
<li>比较时间差值 ： NSCanlader</li>
</ul>
</li>
</ul>
<figure class="highlight objc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">@implementation</span> <span class="title">NSDate</span> (<span class="title">SLQDate</span>)</span></span><br><span class="line">- (<span class="built_in">NSDateComponents</span> *)deltaFrom:(<span class="built_in">NSDate</span> *)from</span><br><span class="line">&#123;</span><br><span class="line">    <span class="built_in">NSCalendar</span> *cal = [<span class="built_in">NSCalendar</span> currentCalendar];</span><br><span class="line"></span><br><span class="line">    <span class="built_in">NSCalendarUnit</span> unit = <span class="built_in">NSCalendarUnitYear</span> | <span class="built_in">NSCalendarUnitMonth</span> | <span class="built_in">NSCalendarUnitDay</span> | <span class="built_in">NSCalendarUnitHour</span> | <span class="built_in">NSCalendarUnitMinute</span> | <span class="built_in">NSCalendarUnitSecond</span>;</span><br><span class="line">   <span class="keyword">return</span> [cal components:unit fromDate:from  toDate:<span class="keyword">self</span> options:<span class="number">0</span>];</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">@end</span></span><br></pre></td></tr></table></figure>
<h3 id="时间显示">时间显示</h3><figure class="highlight objc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/** 显示方式</span><br><span class="line"> 今年</span><br><span class="line">    今天</span><br><span class="line">        1分钟内</span><br><span class="line">            刚刚</span><br><span class="line">        1小时内</span><br><span class="line">            xx分钟前</span><br><span class="line">        其他</span><br><span class="line">            xx小时前</span><br><span class="line">    昨天</span><br><span class="line">        昨天 18:56:34</span><br><span class="line">    其他</span><br><span class="line">        06-23 19:56:23</span><br><span class="line"></span><br><span class="line"> 非今年</span><br><span class="line">    2014-05-08 18:45:30</span><br><span class="line"> */</span></span><br></pre></td></tr></table></figure>
<ul>
<li>头像右下角：微博认证（小图片）</li>
<li>重构：搞一个父类控制器处理相同类型的数据</li>
</ul>
<h2 id="精华模块-1">精华模块</h2><ul>
<li>计算cell高度<ul>
<li>cell frame</li>
</ul>
</li>
<li>图片</li>
</ul>
<p><img src="../images/屏幕快照 2015-07-29 11.30.36.png" alt=""></p>
<ul>
<li><p>图片下载进度</p>
<ul>
<li>各种细节</li>
</ul>
</li>
<li><p>删除第三方框架时问题一大堆</p>
<ul>
<li>解决方式：使用继承。更换时只需该改变父类即可</li>
<li>把通用的方法写出来，其他的功能全部封装到自己额类中</li>
</ul>
</li>
</ul>
<ul>
<li>长图显示最顶部<ul>
<li>使用2d绘图方式获取，等比例缩放</li>
</ul>
</li>
</ul>
<h3 id="加号按钮动画效果">加号按钮动画效果</h3><ul>
<li><p>pop facebook（弹簧效果）</p>
</li>
<li><p>pop和Core Animation的区别</p>
<ul>
<li>1.Core Animation的动画只能添加到layer上</li>
<li>2.pop的动画能添加到任何对象</li>
<li>3.pop的底层并非基于Core Animation, 是基于CADisplayLink</li>
<li>4.Core Animation的动画仅仅是表象, 并不会真正修改对象的frame\size等值</li>
<li>5.pop的动画实时修改对象的属性, 真正地修改了对象的属性</li>
</ul>
</li>
</ul>
<p><img src="../images/屏幕快照 2015-07-30 09.17.26.png" alt=""></p>
<ul>
<li><p>弹出控制器</p>
</li>
<li><p>弹出UIView</p>
</li>
<li><p>自定义UIWindow</p>
</li>
<li><p>自定义状态栏显示通知</p>
</li>
</ul>
<pre><code>- 版本号
![](../images/屏幕快照 <span class="number">2015</span>-<span class="number">07</span>-<span class="number">30</span> <span class="number">14.45</span><span class="number">.59</span>.png)
</code></pre><ul>
<li>框架细则<ul>
<li>把项目文件和资源文件放到和项目同名的文件夹中</li>
<li>把图片资源打包到bundle中，直接把文件夹后缀名改为.bundle即可，访问图片时添加bundle名称</li>
</ul>
</li>
<li>上传到github</li>
<li>上传到CocoaPod<ul>
<li>pod trunk</li>
</ul>
</li>
</ul>
<h2 id="UIDynamic_物理引擎">UIDynamic 物理引擎</h2><h3 id="声音界面">声音界面</h3><h3 id="视频界面">视频界面</h3><ul>
<li>这两个界面实现和图片的差不多，只不过还是增加几个属性，然后设置以下具体的值</li>
</ul>
<h3 id="评论功能">评论功能</h3><p>2015-8-2 上午</p>
<ul>
<li><p>cell底部最热评论</p>
</li>
<li><p>评论具体信息</p>
<ul>
<li>键盘通知</li>
</ul>
</li>
<li>header footer<ul>
<li>UITableViewHeaderFooterView</li>
<li>和cell类似，有缓存池，contentViwe,可以注册</li>
</ul>
</li>
</ul>
<figure class="highlight objc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//#import "SLQHeaderFooterView.h"</span></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">@interface</span> <span class="title">SLQHeaderFooterView</span> ()</span></span><br><span class="line"><span class="comment">/**lable*/</span></span><br><span class="line"><span class="keyword">@property</span> (<span class="keyword">nonatomic</span>, <span class="keyword">weak</span>) <span class="built_in">UILabel</span> *lable;</span><br><span class="line"><span class="keyword">@end</span></span><br><span class="line"><span class="class"><span class="keyword">@implementation</span> <span class="title">SLQHeaderFooterView</span></span></span><br><span class="line"><span class="keyword">static</span> <span class="built_in">NSString</span> *ID = <span class="string">@"header"</span>;</span><br><span class="line">+ (instancetype)headerFooterView:(<span class="built_in">UITableView</span> *)tableView</span><br><span class="line">&#123;</span><br><span class="line">    SLQHeaderFooterView *header  = [tableView dequeueReusableHeaderFooterViewWithIdentifier:ID];</span><br><span class="line">    <span class="keyword">if</span> (header == <span class="literal">nil</span>) &#123;</span><br><span class="line">        header = [[SLQHeaderFooterView alloc] initWithReuseIdentifier:ID];</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> header;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">- (instancetype)initWithReuseIdentifier:(<span class="built_in">NSString</span> *)reuseIdentifier</span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">if</span> (<span class="keyword">self</span> = [<span class="keyword">super</span> initWithReuseIdentifier:reuseIdentifier]) &#123;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">self</span><span class="variable">.contentView</span><span class="variable">.backgroundColor</span> = SLQAppBG;</span><br><span class="line"></span><br><span class="line">        <span class="built_in">UILabel</span> *lable  = [[<span class="built_in">UILabel</span> alloc] init];</span><br><span class="line">        lable<span class="variable">.textColor</span> = SLQRGBColor(<span class="number">67</span>, <span class="number">67</span>, <span class="number">67</span>);</span><br><span class="line">        lable<span class="variable">.x</span> = SLQCellMargin;</span><br><span class="line">        lable<span class="variable">.width</span> = SLQScreenW - <span class="number">2</span>* lable<span class="variable">.x</span>;</span><br><span class="line">        lable<span class="variable">.autoresizingMask</span> = <span class="built_in">UIViewAutoresizingFlexibleHeight</span>;</span><br><span class="line">        [<span class="keyword">self</span><span class="variable">.contentView</span> addSubview:lable];</span><br><span class="line">        <span class="keyword">self</span><span class="variable">.lable</span> = lable;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">self</span>;</span><br><span class="line">&#125;</span><br><span class="line">- (<span class="keyword">void</span>)setTitle:(<span class="built_in">NSString</span> *)title</span><br><span class="line">&#123;</span><br><span class="line">    _title = [title <span class="keyword">copy</span>];</span><br><span class="line">    <span class="keyword">self</span><span class="variable">.lable</span><span class="variable">.text</span> = title;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">@end</span></span><br></pre></td></tr></table></figure>
<ul>
<li>模型和字典映射</li>
</ul>
<figure class="highlight objc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 模型和属性映射</span></span><br><span class="line">+ (<span class="built_in">NSDictionary</span> *)replacedKeyFromPropertyName</span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">return</span> @&#123;</span><br><span class="line">             <span class="string">@"small_image"</span>:<span class="string">@"image0"</span>,</span><br><span class="line">             <span class="string">@"middle_image"</span>:<span class="string">@"image1"</span>,</span><br><span class="line">             <span class="string">@"large_image"</span>:<span class="string">@"image2"</span>,</span><br><span class="line">             <span class="string">@"ID"</span>:<span class="string">@"id"</span>,</span><br><span class="line">             <span class="string">@"top_cmt"</span>:<span class="string">@"top_cmt[0]"</span><span class="comment">// 数组中具体元素</span></span><br><span class="line">             &#125;;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ul>
<li><p>cell auto-sizing（iOS8）</p>
</li>
<li><p>cell 高度自动计算（控件固定）</p>
<ul>
<li>让cell bottom等于最底部控件的bottom</li>
<li><code>关键是contentView的bottom等于最下面的控件的bottom</code></li>
</ul>
</li>
</ul>
<figure class="highlight objc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 自定cell的估计高度并执行自动计算高度</span></span><br><span class="line"> <span class="keyword">self</span><span class="variable">.tableView</span><span class="variable">.estimatedRowHeight</span> = <span class="number">44</span>;</span><br><span class="line"> <span class="keyword">self</span><span class="variable">.tableView</span><span class="variable">.rowHeight</span> = <span class="built_in">UITableViewAutomaticDimension</span>;</span><br></pre></td></tr></table></figure>
<ul>
<li>上拉刷新</li>
<li>重复请求:保存参数、使用manage</li>
</ul>
<figure class="highlight objc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 加载数据之前，取消所有请求</span></span><br><span class="line"> [<span class="keyword">self</span><span class="variable">.manager</span><span class="variable">.tasks</span> makeObjectsPerformSelector:<span class="keyword">@selector</span>(cancel)];</span><br></pre></td></tr></table></figure>
<ul>
<li>点击状态栏回到scrollView顶部<ul>
<li>UIWindow</li>
<li>坐标系转换 convertRect: toView:</li>
<li>判断当前显示界面是不是当前window</li>
</ul>
</li>
</ul>
<figure class="highlight objc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span><br><span class="line"> *	是否在主窗口上</span><br><span class="line"> */</span></span><br><span class="line">- (<span class="built_in">BOOL</span>)isShowingOnKeyWindow</span><br><span class="line">&#123;</span><br><span class="line">    <span class="comment">// 坐标转换</span></span><br><span class="line">    <span class="built_in">CGRect</span> newRect =  [<span class="keyword">self</span><span class="variable">.superview</span> convertRect:<span class="keyword">self</span><span class="variable">.frame</span> toView:<span class="literal">nil</span>];</span><br><span class="line">    <span class="built_in">CGRect</span> keyBounds = SLQKeyWindow<span class="variable">.bounds</span>;</span><br><span class="line">    <span class="comment">// 判断两个控件是否有重叠</span></span><br><span class="line">    <span class="built_in">BOOL</span> isOverlaped = <span class="built_in">CGRectIntersectsRect</span>(newRect,keyBounds);</span><br><span class="line">    <span class="keyword">return</span> (<span class="keyword">self</span><span class="variable">.window</span> == SLQKeyWindow) &amp;&amp; !<span class="keyword">self</span><span class="variable">.hidden</span> &amp;&amp; <span class="keyword">self</span><span class="variable">.alpha</span> &gt; <span class="number">0.01</span> &amp;&amp; isOverlaped;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="2015-8-3">2015-8-3</h3><ul>
<li><p>添加过自定义winow后，登录界面状态栏显示有问题：不是白色</p>
<ul>
<li><p>方法1：改变状态栏控制器方式：关闭控制器管理状态栏，直接使用UIApplication 管理状态栏(info.list里设置)<br><img src="../images/屏幕快照 2015-08-05 23.39.01.png" alt=""></p>
</li>
<li><p>方法2：在登录界面隐藏window，退出登录时再显示</p>
<figure class="highlight objc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">    <span class="comment">// 设置状态栏为默认</span></span><br><span class="line">  [SLQTopWindow show];</span><br><span class="line"><span class="comment">//[UIApplication sharedApplication].statusBarStyle = UIStatusBarStyleDefault;</span></span><br></pre></td></tr></table></figure>
</li>
</ul>
</li>
<li><p>给github其他项目提交代码</p>
<ul>
<li>1、fork到自己仓库中</li>
<li>2、下载到本地，进行修改</li>
<li>3、同步到自己服务器</li>
<li>4、pull request</li>
<li>5、作者审核并 merge</li>
</ul>
</li>
</ul>
<h4 id="menuController">menuController</h4><ul>
<li>长按某个控件，弹出一个小菜单<ul>
<li>默认支持menuController的控件<ul>
<li>UIWebView</li>
<li>UITextField</li>
<li>UITextView</li>
</ul>
</li>
<li>其他控件需要实现可以使用自定义<ul>
<li>canPerform</li>
</ul>
</li>
<li>功能选择，使用</li>
<li>自定义<h4 id="圆形头像">圆形头像</h4></li>
</ul>
</li>
<li>layer比较卡</li>
</ul>
<figure class="highlight objc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 显示圆形头像方式1：直接修改图片的layer</span></span><br><span class="line"><span class="comment">// 有点卡。不太好</span></span><br><span class="line"><span class="keyword">self</span><span class="variable">.iconImageView</span><span class="variable">.layer</span><span class="variable">.cornerRadius</span> = <span class="keyword">self</span><span class="variable">.iconImageView</span><span class="variable">.width</span> * <span class="number">0.5</span>;</span><br><span class="line"><span class="keyword">self</span><span class="variable">.iconImageView</span><span class="variable">.layer</span><span class="variable">.masksToBounds</span> = <span class="literal">YES</span>;</span><br></pre></td></tr></table></figure>
<ul>
<li><p>绘图实现</p>
<ul>
<li><p>透明</p>
<figure class="highlight objc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">@implementation</span> <span class="title">UIImage</span> (<span class="title">SLQCircleImage</span>)</span></span><br><span class="line"><span class="comment">/**</span><br><span class="line"> * 返回圆形图片</span><br><span class="line"> */</span></span><br><span class="line">- (instancetype)circleImage</span><br><span class="line">&#123;</span><br><span class="line">    <span class="comment">// 开启图形上下文,带有透明背景的上下文</span></span><br><span class="line">    <span class="built_in">UIGraphicsBeginImageContextWithOptions</span>(<span class="keyword">self</span><span class="variable">.size</span>, <span class="literal">NO</span>, <span class="number">0.0</span>);</span><br><span class="line">    <span class="comment">// 建立圆形裁切</span></span><br><span class="line">    <span class="built_in">CGContextRef</span> ctx = <span class="built_in">UIGraphicsGetCurrentContext</span>();</span><br><span class="line">    <span class="comment">//  绘制一个圆</span></span><br><span class="line">    <span class="built_in">CGRect</span> rect = <span class="built_in">CGRectMake</span>(<span class="number">0</span>, <span class="number">0</span>, <span class="keyword">self</span><span class="variable">.size</span><span class="variable">.width</span>, <span class="keyword">self</span><span class="variable">.size</span><span class="variable">.height</span>);</span><br><span class="line">    <span class="built_in">CGContextAddEllipseInRect</span>(ctx, rect);</span><br><span class="line">    <span class="comment">// 裁剪</span></span><br><span class="line">    <span class="built_in">CGContextClip</span>(ctx);</span><br><span class="line">    <span class="comment">// 绘制图片到上下文</span></span><br><span class="line">    [<span class="keyword">self</span> drawInRect:rect];</span><br><span class="line">    <span class="comment">// 从图形上下文获取图片</span></span><br><span class="line">    <span class="built_in">UIImage</span> *image = <span class="built_in">UIGraphicsGetImageFromCurrentImageContext</span>();</span><br><span class="line">    <span class="comment">// 关闭图形上下文</span></span><br><span class="line">    <span class="built_in">UIGraphicsEndImageContext</span>();</span><br><span class="line">    <span class="keyword">return</span> image;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">@end</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>头像url可能返回nil值，判断一下（可将下载图片方式封装起来UIImageView）</p>
</li>
</ul>
</li>
</ul>
<figure class="highlight objc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">@implementation</span> <span class="title">UIImageView</span> (<span class="title">SLQCircleImage</span>)</span></span><br><span class="line"><span class="comment">/**</span><br><span class="line"> *	通过URL获取图片，并对图片进行处理，返回圆形图片</span><br><span class="line"> */</span></span><br><span class="line">- (<span class="keyword">void</span>) setHeaderWithUrl:(<span class="built_in">NSString</span> *)url</span><br><span class="line">&#123;</span><br><span class="line">    <span class="built_in">UIImage</span> *placeholder = [[<span class="built_in">UIImage</span> imageNamed:<span class="string">@"defaultUserIcon"</span>] circleImage];</span><br><span class="line">    [<span class="keyword">self</span> sd_setImageWithURL:[<span class="built_in">NSURL</span> URLWithString:url] placeholderImage:placeholder completed:^(<span class="built_in">UIImage</span> *image, <span class="built_in">NSError</span> *error, SDImageCacheType cacheType, <span class="built_in">NSURL</span> *imageURL) &#123;</span><br><span class="line">        <span class="comment">// 如果image为空就显示占位图片</span></span><br><span class="line">        <span class="keyword">self</span><span class="variable">.image</span> = image ? [image circleImage] : placeholder ;</span><br><span class="line">    &#125;];</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">@end</span></span><br></pre></td></tr></table></figure>
<h3 id="第二次选中tabBar时刷新控制器">第二次选中tabBar时刷新控制器</h3><ul>
<li>1、在AppDelegate选中时发送通知，在各个控制器中接受通知</li>
</ul>
<figure class="highlight objc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 实现代理方法：监听tabBar点击</span></span><br><span class="line">- (<span class="keyword">void</span>)tabBarController:(<span class="built_in">UITabBarController</span> *)tabBarController didSelectViewController:(<span class="built_in">UIViewController</span> <span class="comment">/*)viewController</span><br><span class="line">&#123;</span><br><span class="line">    // 点击过后发送通知</span><br><span class="line">    [[NSNotificationCenter defaultCenter] postNotificationName:SLQNotificationTabBarClickedKey object:nil userInfo:nil];</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">//---------------</span><br><span class="line">// 在控制器中接收事件并处理</span><br><span class="line">// 接收tabBar选中通知</span><br><span class="line">[[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(tabBarClick) name:SLQNotificationTabBarClickedKey object:nil];</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span><br><span class="line"> *	选中tabBar就调用</span><br><span class="line"> */</span></span><br><span class="line">- (void)tabBarClick</span><br><span class="line">&#123;</span><br><span class="line">    BOOL isTopicView = self.tabBarController.selectedViewController == self.navigationController ; // 是不是</span><br><span class="line">    BOOL isShowing = [self.view isShowingOnKeyWindow] ; // 是不是正在显示的控制器</span><br><span class="line">    BOOL isClickTwice = (self.clickTabBarCount == self.tabBarController.selectedIndex) ; // 记录点击的控制器索引</span><br><span class="line"></span><br><span class="line">     if(isTopicView &amp;&amp; isShowing &amp;&amp; isClickTwice) // 是精华控制器并且点击两次,就刷新数据</span><br><span class="line">    &#123;</span><br><span class="line">        SLQLog(@"%zd",self.tabBarController.selectedIndex);</span><br><span class="line"></span><br><span class="line">        [self.tableView.header beginRefreshing];</span><br><span class="line">    &#125;</span><br><span class="line">    // 记录选中控制器的索引</span><br><span class="line">    self.clickTabBarCount = self.tabBarController.selectedIndex;</span><br><span class="line">&#125;</span></span><br></pre></td></tr></table></figure>
<ul>
<li>2、监听tabBar按钮的点击addTarget，发送通知<pre><code>-<span class="ruby"> 重复添加
</span>-<span class="ruby"> 解决方法：声明一个bool变量进行控制</span>
</code></pre><figure class="highlight objc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="comment">// 静态局部变量记录按钮添加次数，只添加一轮</span></span><br><span class="line"><span class="keyword">static</span> <span class="built_in">BOOL</span> addTar = <span class="literal">NO</span>;”””</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span>(!addTar)</span><br><span class="line">&#123;</span><br><span class="line">    [btn addTarget:<span class="keyword">self</span> action:<span class="keyword">@selector</span>(btnClick:) forControlEvents:<span class="built_in">UIControlEventTouchUpInside</span>];</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
</ul>
<h3 id="新帖模块">新帖模块</h3><ul>
<li>直接继承实现，改变请求参数</li>
</ul>
<figure class="highlight objc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span><br><span class="line"> *	请求参数a</span><br><span class="line"> */</span></span><br><span class="line">- (<span class="built_in">NSString</span> *)a</span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">if</span> ([<span class="keyword">self</span><span class="variable">.parentViewController</span> isKindOfClass:[SLQNewViewController class]]) &#123;</span><br><span class="line">         <span class="keyword">return</span> <span class="string">@"newlist"</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="string">@"list"</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ul>
<li>评论模块中，评论为0时服务器传回空数组，进行判断.</li>
</ul>
<figure class="highlight objc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 如果返回数据为nil</span></span><br><span class="line"><span class="keyword">if</span> (![responseObject isKindOfClass:[<span class="built_in">NSDictionary</span> class]]) &#123;</span><br><span class="line">     [<span class="keyword">self</span><span class="variable">.tableView</span><span class="variable">.header</span> endRefreshing];</span><br><span class="line">    <span class="keyword">return</span> ;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="我的模块">我的模块</h3><ul>
<li>tableView:group</li>
<li>添加按钮</li>
<li>计算行数<br><em>公式：总页数 = （总个数 + 列数 - 1）/ 列数</em></li>
</ul>
<figure class="highlight objc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">    <span class="comment">// 计算按钮总高度</span></span><br><span class="line"><span class="comment">//    NSInteger height = self.squares.count / cols;</span></span><br><span class="line"><span class="comment">//    CGFloat res = self.squares.count % cols;</span></span><br><span class="line"><span class="comment">//    if(res != 0)</span></span><br><span class="line"><span class="comment">//    &#123;</span></span><br><span class="line"><span class="comment">//        height ++;</span></span><br><span class="line"><span class="comment">//    &#125;</span></span><br><span class="line"><span class="comment">//</span></span><br><span class="line"><span class="comment">////    self.height = height;</span></span><br><span class="line">    <span class="comment">// 公式：总页数 = （总个数 + 列数 - 1）/ 列数</span></span><br><span class="line">    <span class="keyword">self</span><span class="variable">.height</span> =  btnH * (<span class="keyword">self</span><span class="variable">.squares</span><span class="variable">.count</span> + cols - <span class="number">1</span>) / cols ;</span><br></pre></td></tr></table></figure>
<h4 id="网页加载进度条">网页加载进度条</h4><ul>
<li>框架 <code>NJKWebViewProgress</code></li>
</ul>
<figure class="highlight objc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">self</span><span class="variable">.progress</span> = [[NJKWebViewProgress alloc] init];</span><br><span class="line"><span class="keyword">self</span><span class="variable">.webView</span><span class="variable">.delegate</span> = <span class="keyword">self</span><span class="variable">.progress</span>;</span><br><span class="line">__<span class="keyword">weak</span> <span class="keyword">typeof</span>(<span class="keyword">self</span>) weakSelf = <span class="keyword">self</span>;</span><br><span class="line"><span class="keyword">self</span><span class="variable">.progress</span><span class="variable">.progressBlock</span> = ^(<span class="keyword">float</span> progress)</span><br><span class="line">&#123;</span><br><span class="line">    [weakSelf<span class="variable">.progressView</span> setProgress:progress animated:<span class="literal">YES</span>];</span><br><span class="line">    weakSelf<span class="variable">.progressView</span><span class="variable">.hidden</span> = progress == <span class="number">1.0</span>;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="comment">// 如果想在控制器继续实现代理方法，那么需要再将代理设置回来</span></span><br><span class="line"><span class="keyword">self</span><span class="variable">.progress</span><span class="variable">.webViewProxyDelegate</span> = <span class="keyword">self</span>;</span><br></pre></td></tr></table></figure>
<h2 id="2015-8-5">2015-8-5</h2><ul>
<li>添加段子<ul>
<li>给每个段子添加一个标签，用于快速索引<code>tag</code></li>
<li>导航栏中间title文字属性 <code>setTextAttribute</code></li>
<li>可以通过<code>apprance</code>统一设置</li>
<li><code>apperence</code>设置的属性可能会有延迟，在viewDidLoad里可以强制刷新<br><code>[self.navigationController.navigationBar layoutIfNeeded];</code></li>
</ul>
</li>
</ul>
<h3 id="自定义UITextField（增加占位文字功能）">自定义UITextField（增加占位文字功能）</h3><ul>
<li><p>创建带有占位文字功能的textField</p>
</li>
<li><p>文字编辑</p>
<ul>
<li><code>UITextField</code><ul>
<li>只能显示一行，有占位文字</li>
</ul>
</li>
<li><code>UITextView</code><ul>
<li>可以显示多行文字，没有占位文字</li>
</ul>
</li>
</ul>
</li>
<li>实际需要：可以显示多行，又有占位文字</li>
<li>方法：继承UITextView，然后再增加占位文字功能<ul>
<li>placeholder 实现</li>
</ul>
</li>
<li><p>drawRect实现占位文字</p>
<ul>
<li>无法随光标滚动而滚动</li>
</ul>
</li>
<li><p>presentedViewController –&gt; 指向弹出的控制器</p>
</li>
<li><p>presentngViewController –&gt; 指向弹出控制器的父控制器</p>
</li>
<li><p>textField</p>
<ul>
<li>文字改变不建议使用代理方法（使用代码改变文字不会进入代理方法）</li>
<li>通知</li>
<li>addtarget<br><code>// 监听textField的状态改变</code><br><code>[textField addTarget:self action:@selector(textFieldChanged) forControlEvents:UIControlEventEditingChanged];</code></li>
<li>代理实现returnKey的监听</li>
</ul>
</li>
</ul>
<figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">/**&#10; *&#9;&#30417;&#21548;&#38190;&#30424;&#26368;&#21491;&#19979;&#35282;&#25353;&#38062;&#30340;&#28857;&#20987;&#65288;return key&#65292; &#27604;&#22914;&#8220;&#25442;&#34892;&#8221;&#12289;&#8220;&#23436;&#25104;&#8221;&#31561;&#31561;&#65289;&#10; */&#10;- (BOOL)textFieldShouldReturn:(UITextField *)textField&#10;&#123;&#10;    SLQLogFunction;&#10;    if (textField.hasText) &#123;&#10;        [self addTag];&#10;    &#125;&#10;    return YES;&#10;&#125;</span><br></pre></td></tr></table></figure>
<ul>
<li>协议方法：insertText： 特殊字符以及英文字符，不能相应汉字输入</li>
</ul>
<ul>
<li>协议方法：deleteBackword： ： 删除键<ul>
<li>block实现</li>
</ul>
</li>
</ul>
<figure class="highlight objc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span><br><span class="line"> *	删除键block</span><br><span class="line"> */</span></span><br><span class="line"><span class="keyword">@property</span> (<span class="keyword">nonatomic</span>, <span class="keyword">copy</span>) <span class="keyword">void</span> (^deleteBlock)();</span><br></pre></td></tr></table></figure>
<h2 id="2015-8-6">2015-8-6</h2><h3 id="上午(视频再看一遍)">上午(视频再看一遍)</h3><ul>
<li>子控件的布局，最好放到viewDidLayoutSubviews</li>
<li>1、获取缓存大小<ul>
<li>sd_webimage   [SDImageCache sharedImageCache].getsize;</li>
</ul>
</li>
<li><p>2、使用NSFileMangler</p>
<ul>
<li>遍历器对文件夹进行遍历，然后累加文件大小</li>
<li><code>NSDirectoryEnumerator</code></li>
<li>默认只会遍历文件，所以要把子文件夹跳过去 <code>fileExistsAtPath：</code></li>
<li><p>通过attrbute 的属性：文件类型来判断<code>NSFileType</code></p>
</li>
<li><p><code>contentDirectoryAtPath:()</code></p>
</li>
<li><code>subPathAtPath:</code></li>
</ul>
</li>
<li>清空缓存</li>
<li><p>方式1：使用SDWebImage自带的方法</p>
<figure class="highlight objc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">    <span class="comment">// 获取缓存大小</span></span><br><span class="line">    <span class="built_in">NSUInteger</span> size = [SDImageCache sharedImageCache]<span class="variable">.getSize</span>;</span><br><span class="line">    <span class="comment">// 清空缓存</span></span><br><span class="line"><span class="comment">//    [[SDImageCache sharedImageCache] clearDisk];</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>方式2:</p>
</li>
<li>文件遍历器，</li>
</ul>
<figure class="highlight objc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">NSFileOwnerAccountID</span> : <span class="number">501</span>,</span><br><span class="line"><span class="built_in">NSFileSystemFileNumber</span> : <span class="number">10163664</span>,</span><br><span class="line"><span class="built_in">NSFileExtensionHidden</span> : <span class="number">0</span>, <span class="comment">//</span></span><br><span class="line"><span class="built_in">NSFileSystemNumber</span> : <span class="number">16777220</span>,</span><br><span class="line"><span class="built_in">NSFileSize</span> : <span class="number">16594</span>, <span class="comment">// 大小</span></span><br><span class="line"><span class="built_in">NSFileGroupOwnerAccountID</span> : <span class="number">20</span>,</span><br><span class="line"><span class="built_in">NSFilePosixPermissions</span> : <span class="number">420</span>,</span><br><span class="line"><span class="built_in">NSFileCreationDate</span> : <span class="number">2015</span>-<span class="number">08</span>-<span class="number">12</span> <span class="number">00</span>:<span class="number">39</span>:<span class="number">36</span> +<span class="number">0000</span>, <span class="comment">// 创建时间</span></span><br><span class="line"><span class="built_in">NSFileType</span> : <span class="built_in">NSFileTypeRegular</span>, <span class="comment">// 文件类型：文件/文件夹</span></span><br><span class="line"><span class="built_in">NSFileGroupOwnerAccountName</span> : staff,</span><br><span class="line"><span class="built_in">NSFileReferenceCount</span> : <span class="number">1</span>,</span><br><span class="line"><span class="built_in">NSFileModificationDate</span> : <span class="number">2015</span>-<span class="number">08</span>-<span class="number">12</span> <span class="number">00</span>:<span class="number">39</span>:<span class="number">36</span> +<span class="number">0000</span></span><br></pre></td></tr></table></figure>
<figure class="highlight objc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"> <span class="built_in">NSFileManager</span> *fileManager = [<span class="built_in">NSFileManager</span> defaultManager];</span><br><span class="line"> <span class="built_in">NSString</span> *cachePath = [<span class="built_in">NSSearchPathForDirectoriesInDomains</span>(<span class="built_in">NSCachesDirectory</span>, <span class="built_in">NSUserDomainMask</span>, <span class="literal">YES</span>) lastObject];</span><br><span class="line"><span class="comment">// "default/com.hackemist.SDWebImageCache.default"</span></span><br><span class="line"> <span class="built_in">NSString</span> *cacheFullPath = [cachePath stringByAppendingPathComponent:<span class="string">@"default/com.hackemist.SDWebImageCache.default"</span>];</span><br><span class="line"> <span class="built_in">NSDirectoryEnumerator</span> *fileEnumerator = [fileManager enumeratorAtPath:cacheFullPath];</span><br><span class="line"> <span class="built_in">NSUInteger</span> cacheSize = <span class="number">0</span>;</span><br><span class="line"> <span class="keyword">for</span> (<span class="built_in">NSString</span> *fileName <span class="keyword">in</span> fileEnumerator) &#123;</span><br><span class="line">     <span class="built_in">NSString</span> *filePath = [cacheFullPath stringByAppendingPathComponent:fileName];</span><br><span class="line">     <span class="comment">// 使用文件属性</span></span><br><span class="line">     <span class="built_in">NSDictionary</span> *attrs = [[<span class="built_in">NSFileManager</span> defaultManager] attributesOfItemAtPath:filePath error:<span class="literal">nil</span>];</span><br><span class="line">     <span class="comment">// 获取每个文件的文件大小NSFileSize</span></span><br><span class="line">     cacheSize += [attrs[<span class="built_in">NSFileSize</span>] integerValue];</span><br><span class="line"> &#125;</span><br><span class="line"> <span class="built_in">NSLog</span>(<span class="string">@"%zd"</span>,cacheSize);</span><br></pre></td></tr></table></figure>
<ul>
<li>如果路径中还包含文件夹，那么就得使用另一种方式</li>
<li>可以直接递归读取文件夹，累加文件</li>
</ul>
<figure class="highlight objc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 使用文件属性</span></span><br><span class="line">     <span class="built_in">NSDictionary</span> *attrs = [[<span class="built_in">NSFileManager</span> defaultManager] attributesOfItemAtPath:filePath error:<span class="literal">nil</span>];</span><br><span class="line">     <span class="built_in">BOOL</span> isDir = <span class="literal">NO</span>;</span><br><span class="line">     [fileManager fileExistsAtPath:filePath isDirectory:&amp;isDir];</span><br><span class="line">     <span class="keyword">if</span> (isDir) &#123;<span class="comment">// 是文件夹，跳过</span></span><br><span class="line">         <span class="keyword">continue</span>;</span><br><span class="line">     &#125;</span><br></pre></td></tr></table></figure>
<h3 id="app换肤功能">app换肤功能</h3><ul>
<li><p>建立一个plist文件，里面保存各种颜色，通过key来改变颜色</p>
</li>
<li><p>通过文件夹方式：每中皮肤放在一个文件夹下，并且名称一致</p>
</li>
<li>然后换肤的话通过只需修改路径即可<br>-<h3 id="下午（视频看一遍）">下午（视频看一遍）</h3></li>
<li>动态相册<ul>
<li>UIScrollView</li>
<li>UICollectionView 瀑布流布局<ul>
<li>水</li>
</ul>
</li>
</ul>
</li>
</ul>
<h2 id="2015-8-7">2015-8-7</h2><h3 id="上午">上午</h3><ul>
<li>瀑布流布局<ul>
<li>UICollectionView</li>
<li>自己排布cell</li>
</ul>
</li>
<li>运行时<ul>
<li>属性和成员变量</li>
<li>Method Sizzle</li>
<li>交换方法执行</li>
<li>字典、数组value为nil</li>
</ul>
</li>
</ul>
  
	</div>
		<footer class="article-footer clearfix">

  <div class="article-tags">
  
  <span></span> <a href="/tags/iOS/">iOS</a>
  </div>




<div class="article-share" id="share">

  <div data-url="http://yoursite.com/2013/09/13/项目实战/" data-title="项目总结 | Bloging" data-tsina="null" class="share clearfix">
  </div>

</div>
</footer>   	       
	</article>
	
<nav class="article-nav clearfix">
 
 <div class="prev" >
 <a href="/2013/09/14/UITableView总结/" title="UITableView总结">
  <strong>PREVIOUS:</strong><br/>
  <span>
  UITableView总结</span>
</a>
</div>


<div class="next">
<a href="/2013/09/12/事件处理/"  title="事件处理">
 <strong>NEXT:</strong><br/> 
 <span>事件处理
</span>
</a>
</div>

</nav>

	
</div>  
      <div class="openaside"><a class="navbutton" href="#" title="显示侧边栏"></a></div>

  <div id="toc" class="toc-aside">
  <strong class="toc-title">文章目录</strong>
  <ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#项目总结"><span class="toc-number">1.</span> <span class="toc-text">项目总结</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#tabBar默认显示蓝色的文字和图片"><span class="toc-number">1.1.</span> <span class="toc-text">tabBar默认显示蓝色的文字和图片</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#appearance属性"><span class="toc-number">1.2.</span> <span class="toc-text">appearance属性</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#自定义tabBar"><span class="toc-number">1.3.</span> <span class="toc-text">自定义tabBar</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#自定义UIView工具类"><span class="toc-number">2.</span> <span class="toc-text">自定义UIView工具类</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#设置所有的子控制器的返回按钮样式一致"><span class="toc-number">2.1.</span> <span class="toc-text">设置所有的子控制器的返回按钮样式一致</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#自定义cell"><span class="toc-number">2.2.</span> <span class="toc-text">自定义cell</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#键盘处理"><span class="toc-number">2.3.</span> <span class="toc-text">键盘处理</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#问题"><span class="toc-number">2.4.</span> <span class="toc-text">问题</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#登陆注册"><span class="toc-number">2.5.</span> <span class="toc-text">登陆注册</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#设置状态栏"><span class="toc-number">2.5.1.</span> <span class="toc-text">设置状态栏</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#自定义按钮"><span class="toc-number">2.5.2.</span> <span class="toc-text">自定义按钮</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#登陆界面"><span class="toc-number">2.5.3.</span> <span class="toc-text">登陆界面</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#占位文字颜色设置"><span class="toc-number">2.5.4.</span> <span class="toc-text">占位文字颜色设置</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#更新推送通知"><span class="toc-number">2.5.5.</span> <span class="toc-text">更新推送通知</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#精华模块"><span class="toc-number">2.6.</span> <span class="toc-text">精华模块</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#时间显示"><span class="toc-number">2.6.1.</span> <span class="toc-text">时间显示</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#精华模块-1"><span class="toc-number">2.7.</span> <span class="toc-text">精华模块</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#加号按钮动画效果"><span class="toc-number">2.7.1.</span> <span class="toc-text">加号按钮动画效果</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#UIDynamic_物理引擎"><span class="toc-number">2.8.</span> <span class="toc-text">UIDynamic 物理引擎</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#声音界面"><span class="toc-number">2.8.1.</span> <span class="toc-text">声音界面</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#视频界面"><span class="toc-number">2.8.2.</span> <span class="toc-text">视频界面</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#评论功能"><span class="toc-number">2.8.3.</span> <span class="toc-text">评论功能</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2015-8-3"><span class="toc-number">2.8.4.</span> <span class="toc-text">2015-8-3</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#menuController"><span class="toc-number">2.8.4.1.</span> <span class="toc-text">menuController</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#圆形头像"><span class="toc-number">2.8.4.2.</span> <span class="toc-text">圆形头像</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#第二次选中tabBar时刷新控制器"><span class="toc-number">2.8.5.</span> <span class="toc-text">第二次选中tabBar时刷新控制器</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#新帖模块"><span class="toc-number">2.8.6.</span> <span class="toc-text">新帖模块</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#我的模块"><span class="toc-number">2.8.7.</span> <span class="toc-text">我的模块</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#网页加载进度条"><span class="toc-number">2.8.7.1.</span> <span class="toc-text">网页加载进度条</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#2015-8-5"><span class="toc-number">2.9.</span> <span class="toc-text">2015-8-5</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#自定义UITextField（增加占位文字功能）"><span class="toc-number">2.9.1.</span> <span class="toc-text">自定义UITextField（增加占位文字功能）</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#2015-8-6"><span class="toc-number">2.10.</span> <span class="toc-text">2015-8-6</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#上午(视频再看一遍)"><span class="toc-number">2.10.1.</span> <span class="toc-text">上午(视频再看一遍)</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#app换肤功能"><span class="toc-number">2.10.2.</span> <span class="toc-text">app换肤功能</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#下午（视频看一遍）"><span class="toc-number">2.10.3.</span> <span class="toc-text">下午（视频看一遍）</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#2015-8-7"><span class="toc-number">2.11.</span> <span class="toc-text">2015-8-7</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#上午"><span class="toc-number">2.11.1.</span> <span class="toc-text">上午</span></a></li></ol></li></ol></li></ol>
  </div>

<div id="asidepart">
<div class="closeaside"><a class="closebutton" href="#" title="隐藏侧边栏"></a></div>
<aside class="clearfix">

  

  
<div class="tagslist">
	<p class="asidetitle">标签</p>
		<ul class="clearfix">
		
			<li><a href="/tags/HTML5/" title="HTML5">HTML5<sup>1</sup></a></li>
		
			<li><a href="/tags/autolayout/" title="autolayout">autolayout<sup>1</sup></a></li>
		
			<li><a href="/tags/iOS/" title="iOS">iOS<sup>21</sup></a></li>
		
			<li><a href="/tags/iPad/" title="iPad">iPad<sup>1</sup></a></li>
		
			<li><a href="/tags/scrollView/" title="scrollView">scrollView<sup>1</sup></a></li>
		
			<li><a href="/tags/换肤/" title="换肤">换肤<sup>1</sup></a></li>
		
		</ul>
</div>


  <div class="rsspart">
	<a href="null" target="_blank" title="rss">RSS 订阅</a>
</div>

</aside>
</div>
    </div>
    <footer><div id="footer" >
	
	<div class="line">
		<span></span>
		<div class="author"></div>
	</div>
	
	
	<div class="social-font clearfix">
		
		
		
		
		
	</div>
		<p class="copyright">Powered by <a href="http://hexo.io" target="_blank" title="hexo">hexo</a> and Theme by <a href="https://github.com/A-limon/pacman" target="_blank" title="Pacman">Pacman</a> © 2015 
		
		<a href="http://yoursite.com" target="_blank" title="Mr Song">Mr Song</a>
		
		</p>
</div>
</footer>
    <script src="/js/jquery-2.1.0.min.js"></script>
<script type="text/javascript">
$(document).ready(function(){ 
  $('.navbar').click(function(){
    $('header nav').toggleClass('shownav');
  });
  var myWidth = 0;
  function getSize(){
    if( typeof( window.innerWidth ) == 'number' ) {
      myWidth = window.innerWidth;
    } else if( document.documentElement && document.documentElement.clientWidth) {
      myWidth = document.documentElement.clientWidth;
    };
  };
  var m = $('#main'),
      a = $('#asidepart'),
      c = $('.closeaside'),
      o = $('.openaside');
  $(window).resize(function(){
    getSize(); 
    if (myWidth >= 1024) {
      $('header nav').removeClass('shownav');
    }else
    {
      m.removeClass('moveMain');
      a.css('display', 'block').removeClass('fadeOut');
      o.css('display', 'none');
      
      $('#toc.toc-aside').css('display', 'none');
        
    }
  });
  c.click(function(){
    a.addClass('fadeOut').css('display', 'none');
    o.css('display', 'block').addClass('fadeIn');
    m.addClass('moveMain');
  });
  o.click(function(){
    o.css('display', 'none').removeClass('beforeFadeIn');
    a.css('display', 'block').removeClass('fadeOut').addClass('fadeIn');      
    m.removeClass('moveMain');
  });
  $(window).scroll(function(){
    o.css("top",Math.max(80,260-$(this).scrollTop()));
  });
});
</script>

<script type="text/javascript">
$(document).ready(function(){ 
  var ai = $('.article-content>iframe'),
      ae = $('.article-content>embed'),
      t  = $('#toc'),
      h  = $('article h2')
      ah = $('article h2'),
      ta = $('#toc.toc-aside'),
      o  = $('.openaside'),
      c  = $('.closeaside');
  if(ai.length>0){
    ai.wrap('<div class="video-container" />');
  };
  if(ae.length>0){
   ae.wrap('<div class="video-container" />');
  };
  if(ah.length==0){
    t.css('display','none');
  }else{
    c.click(function(){
      ta.css('display', 'block').addClass('fadeIn');
    });
    o.click(function(){
      ta.css('display', 'none');
    });
    $(window).scroll(function(){
      ta.css("top",Math.max(140,320-$(this).scrollTop()));
    });
  };
});
</script>


<script type="text/javascript">
$(document).ready(function(){ 
  var $this = $('.share'),
      url = $this.attr('data-url'),
      encodedUrl = encodeURIComponent(url),
      title = $this.attr('data-title'),
      tsina = $this.attr('data-tsina');
  var html = [
  '<a href="#" class="overlay" id="qrcode"></a>',
  '<div class="qrcode clearfix"><span>扫描二维码分享到微信朋友圈</span><a class="qrclose" href="#share"></a><strong>Loading...Please wait</strong><img id="qrcode-pic" data-src="http://s.jiathis.com/qrcode.php?url=' + encodedUrl + '"/></div>',
  '<a href="#textlogo" class="article-back-to-top" title="Top"></a>',
  '<a href="https://www.facebook.com/sharer.php?u=' + encodedUrl + '" class="article-share-facebook" target="_blank" title="Facebook"></a>',
  '<a href="#qrcode" class="article-share-qrcode" title="QRcode"></a>',
  '<a href="https://twitter.com/intent/tweet?url=' + encodedUrl + '" class="article-share-twitter" target="_blank" title="Twitter"></a>',
  '<a href="http://service.weibo.com/share/share.php?title='+title+'&url='+encodedUrl +'&ralateUid='+ tsina +'&searchPic=true&style=number' +'" class="article-share-weibo" target="_blank" title="Weibo"></a>',
  '<span title="Share to"></span>'
  ].join('');
  $this.append(html);
  $('.article-share-qrcode').click(function(){
    var imgSrc = $('#qrcode-pic').attr('data-src');
    $('#qrcode-pic').attr('src', imgSrc);
    $('#qrcode-pic').load(function(){
        $('.qrcode strong').text(' ');
    });
  });
});     
</script>






  </body>
</html>


 <!DOCTYPE HTML>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
  
    <title>iOS中如何使用HTML进行打印 | Bloging</title>
    <meta name="google-site-verification" content="PvTUEr8LZywTInLlqUkqshyJLpIqOn6oreUiZvWKB2Q" />
    
    <meta name="viewport" content="width=device-width, initial-scale=1,user-scalable=no">
    
    <meta name="author" content="Mr Song">
    

    
    <meta name="description" content="iOS中如何使用HTML进行打印 新需求，要把app中的信息打印出来，通过AirPrint方式打印，一脸懵逼。听说图片可以打印，但是要把信息绘制成指定格式的图片好坑，灵活性太低。听说用textKit可以实现，但是textKit图文混排是个大坑，还是想想其他方法。又听说PDF可以直接打印，这个也需要手动绘制出来，其实和图片相差不多。最终我选择使用html，html也可以直接打印，主要是这个排版比较容">
<meta name="keywords" content="HTML">
<meta property="og:type" content="article">
<meta property="og:title" content="iOS中如何使用HTML进行打印">
<meta property="og:url" content="http://songliquan.github.io/2017/03/27/iOS中如何使用HTML进行打印/index.html">
<meta property="og:site_name" content="Bloging">
<meta property="og:description" content="iOS中如何使用HTML进行打印 新需求，要把app中的信息打印出来，通过AirPrint方式打印，一脸懵逼。听说图片可以打印，但是要把信息绘制成指定格式的图片好坑，灵活性太低。听说用textKit可以实现，但是textKit图文混排是个大坑，还是想想其他方法。又听说PDF可以直接打印，这个也需要手动绘制出来，其实和图片相差不多。最终我选择使用html，html也可以直接打印，主要是这个排版比较容">
<meta property="og:locale" content="zh-CN">
<meta property="og:image" content="http://songliquan.github.io/images/Html打印过程.gif">
<meta property="og:updated_time" content="2017-03-27T07:14:00.000Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="iOS中如何使用HTML进行打印">
<meta name="twitter:description" content="iOS中如何使用HTML进行打印 新需求，要把app中的信息打印出来，通过AirPrint方式打印，一脸懵逼。听说图片可以打印，但是要把信息绘制成指定格式的图片好坑，灵活性太低。听说用textKit可以实现，但是textKit图文混排是个大坑，还是想想其他方法。又听说PDF可以直接打印，这个也需要手动绘制出来，其实和图片相差不多。最终我选择使用html，html也可以直接打印，主要是这个排版比较容">
<meta name="twitter:image" content="http://songliquan.github.io/images/Html打印过程.gif">

    
    <link rel="alternative" href="/atom.xml" title="Bloging" type="application/atom+xml">
    
    
    <link rel="icon" href="/img/favicon.ico">
    
    
    <link rel="apple-touch-icon" href="/img/jacman.jpg">
    <link rel="apple-touch-icon-precomposed" href="/img/jacman.jpg">
    
    <link rel="stylesheet" href="/css/style.css">
</head>

  <body>
    <header>
      
<div>
		
			<div id="imglogo">
				<a href="/"><img src="/img/logo.png" alt="Bloging" title="Bloging"/></a>
			</div>
			
			<div id="textlogo">
				<h1 class="site-name"><a href="/" title="Bloging">Bloging</a></h1>
				<h2 class="blog-motto"></h2>
			</div>
			<div class="navbar"><a class="navbutton navmobile" href="#" title="菜单">
			</a></div>
			<nav class="animated">
				<ul>
					<ul>
					 
						<li><a href="/">Home</a></li>
					
						<li><a href="/archives">Archives</a></li>
					
						<li><a href="/atom.xml">Rss</a></li>
					
					<li>
 					
					<form class="search" action="/search/index.html" method="get" accept-charset="utf-8">
						<label>Search</label>
						<input type="search" id="search" autocomplete="off" name="q" maxlength="20" placeholder="搜索" />
					</form>
					
					</li>
					
				</ul>
			</nav>			
</div>
    </header>
    <div id="container">
      <div id="main" class="post" itemscope itemprop="blogPost">
  
	<article itemprop="articleBody"> 
		<header class="article-info clearfix">
  <h1 itemprop="name">
    
      <a href="/2017/03/27/iOS中如何使用HTML进行打印/" title="iOS中如何使用HTML进行打印" itemprop="url">iOS中如何使用HTML进行打印</a>
  </h1>
  <p class="article-author">By
       
		<a href="/about" title="Mr Song" target="_blank" itemprop="author">Mr Song</a>
		
  <p class="article-time">
    <time datetime="2017-03-27T06:11:36.000Z" itemprop="datePublished"> 发表于 2017-03-27</time>
    
  </p>
</header>
	<div class="article-content">
		
		<div id="toc" class="toc-article">
			<strong class="toc-title">文章目录</strong>
		
			<ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#iOS中如何使用HTML进行打印"><span class="toc-number">1.</span> <span class="toc-text">iOS中如何使用HTML进行打印</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#iOS中用于打印的类"><span class="toc-number">1.1.</span> <span class="toc-text">iOS中用于打印的类</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#重写UIPrintPageRenderer"><span class="toc-number">1.2.</span> <span class="toc-text">重写UIPrintPageRenderer</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#发送邮件"><span class="toc-number">1.3.</span> <span class="toc-text">发送邮件</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#数据传递过程"><span class="toc-number">1.4.</span> <span class="toc-text">数据传递过程</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1、录入数据"><span class="toc-number">1.4.1.</span> <span class="toc-text">1、录入数据</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2、传递数据"><span class="toc-number">1.4.2.</span> <span class="toc-text">2、传递数据</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3、生成html"><span class="toc-number">1.4.3.</span> <span class="toc-text">3、生成html</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4、打印html"><span class="toc-number">1.4.4.</span> <span class="toc-text">4、打印html</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#打印html"><span class="toc-number">1.5.</span> <span class="toc-text">打印html</span></a></li></ol></li></ol>
		
		</div>
		
		<h1 id="iOS中如何使用HTML进行打印"><a href="#iOS中如何使用HTML进行打印" class="headerlink" title="iOS中如何使用HTML进行打印"></a>iOS中如何使用HTML进行打印</h1><blockquote>
<p>新需求，要把app中的信息打印出来，通过AirPrint方式打印，一脸懵逼。<br>听说图片可以打印，但是要把信息绘制成指定格式的图片好坑，灵活性太低。<br>听说用textKit可以实现，但是textKit图文混排是个大坑，还是想想其他方法。<br>又听说PDF可以直接打印，这个也需要手动绘制出来，其实和图片相差不多。<br>最终我选择使用html，html也可以直接打印，主要是这个排版比较容易。</p>
</blockquote>
<h2 id="iOS中用于打印的类"><a href="#iOS中用于打印的类" class="headerlink" title="iOS中用于打印的类"></a>iOS中用于打印的类</h2><ul>
<li>打印过程</li>
<li><img src="/images/Html打印过程.gif" alt="Alt text"></li>
<li>苹果有专门的类来处理打印相关的信息。这个类就是<code>UIPrintPageRenderer</code>,可以设置页眉页脚边距纸张大小等等。</li>
<li><a href="https://developer.apple.com/reference/uikit/uiprintpagerenderer?language=objc" target="_blank" rel="noopener">参考官方文档</a></li>
</ul>
<h2 id="重写UIPrintPageRenderer"><a href="#重写UIPrintPageRenderer" class="headerlink" title="重写UIPrintPageRenderer"></a>重写<code>UIPrintPageRenderer</code></h2><ul>
<li>里面有个关键类就是我们重写的<code>UIPrintPageRenderer</code></li>
<li>因为需要显示页眉和页脚，所以要自定义<code>SLQPrintPageRenderer</code></li>
</ul>
<ul>
<li>初始化打印器，指定纸张大小，以及页眉页脚高度和内边距</li>
</ul>
<figure class="highlight objectivec"><table><tr><td class="code"><pre><span class="line">- (<span class="keyword">instancetype</span>)init &#123;</span><br><span class="line"><span class="keyword">if</span> (<span class="keyword">self</span> = [<span class="keyword">super</span> init]) &#123;</span><br><span class="line"><span class="built_in">CGRect</span> rect = <span class="built_in">CGRectMake</span>(<span class="number">0</span>, <span class="number">0</span>, <span class="keyword">self</span>.A4PageWidth, <span class="keyword">self</span>.A4PageHeight);</span><br><span class="line"><span class="comment">// 纸张大小</span></span><br><span class="line">[<span class="keyword">self</span> setValue:[<span class="built_in">NSValue</span> valueWithCGRect:rect] forKey:<span class="string">@"paperRect"</span>];</span><br><span class="line"></span><br><span class="line"><span class="comment">// 打印区域，如果需要间距就这样CGRectInset(pageFrame, 10.0, 10.0))</span></span><br><span class="line"><span class="comment">//        [self setValue:[NSValue valueWithCGRect:rect] forKey:@"printableRect"];</span></span><br><span class="line">[<span class="keyword">self</span> setValue:[<span class="built_in">NSValue</span> valueWithCGRect:<span class="built_in">CGRectInset</span>(rect, <span class="number">10</span>, <span class="number">10</span>)] forKey:<span class="string">@"printableRect"</span>];</span><br><span class="line"><span class="comment">// 页眉页脚</span></span><br><span class="line"><span class="keyword">self</span>.headerHeight = <span class="number">50.0</span>;</span><br><span class="line"><span class="keyword">self</span>.footerHeight = <span class="number">50.0</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">return</span> <span class="keyword">self</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ul>
<li>重写页数,</li>
</ul>
<figure class="highlight objectivec"><table><tr><td class="code"><pre><span class="line"></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">Override numberOfPages so we can compute the values for our UIPrintFormatter based on the paper used for the print job. When this is called, self.paperRect and self.printableRect reflect the paper size and imageable area of the destination paper.</span></span><br><span class="line"><span class="comment">重写改方法，计算页数</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line">- (<span class="built_in">NSInteger</span>)numberOfPages</span><br><span class="line">&#123;</span><br><span class="line"><span class="comment">// We only have one formatter so obtain it so we can set its paramters.</span></span><br><span class="line"><span class="built_in">UIPrintFormatter</span> *myFormatter = (<span class="built_in">UIPrintFormatter</span> *)[<span class="keyword">self</span>.printFormatters objectAtIndex:<span class="number">0</span>];</span><br><span class="line"></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">Compute insets so that margins are 1/2 inch from edge of sheet, or at the edge of the imageable area if it is larger than that. The EdgeInset function takes a margin for the edge being calculated.</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="built_in">CGFloat</span> leftInset = EdgeInset(<span class="keyword">self</span>.printableRect.origin.x);</span><br><span class="line"><span class="built_in">CGFloat</span> rightInset = EdgeInset(<span class="keyword">self</span>.paperRect.size.width - <span class="built_in">CGRectGetMaxX</span>(<span class="keyword">self</span>.printableRect));</span><br><span class="line"></span><br><span class="line"><span class="comment">// Top inset is only used if we want a different inset for the first page and we don't.</span></span><br><span class="line"><span class="comment">// The bottom inset is never used by a viewFormatter.</span></span><br><span class="line">myFormatter.contentInsets = <span class="built_in">UIEdgeInsetsMake</span>(<span class="number">0</span>, leftInset, <span class="number">0</span>, rightInset);</span><br><span class="line"></span><br><span class="line"><span class="comment">// Now compute what we want for the header size and footer size.</span></span><br><span class="line"><span class="comment">// These determine the size and placement of the content height.</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// First compute the title height.</span></span><br><span class="line"><span class="built_in">UIFont</span> *font = [<span class="built_in">UIFont</span> fontWithName:<span class="string">@"Helvetica"</span> size:HEADER_FOOTER_TEXT_HEIGHT];</span><br><span class="line"><span class="comment">// We'll use the same title height for the header and footer.</span></span><br><span class="line"><span class="comment">// This is the minimum height the footer can be.</span></span><br><span class="line"><span class="built_in">CGFloat</span> titleHeight = [<span class="string">@"询问笔录"</span> sizeWithFont:font].height;</span><br><span class="line"></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">We want to calculate these heights so that the content top and bottom edges are a minimum distance from the edge of the sheet and are inset at least MIN_HEADER_FOOTER_DISTANCE_FROM_CONTENT from the header and footer.</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="keyword">self</span>.headerHeight = HeaderFooterHeight(<span class="built_in">CGRectGetMinY</span>(<span class="keyword">self</span>.printableRect), titleHeight);</span><br><span class="line"><span class="keyword">self</span>.footerHeight = HeaderFooterHeight(<span class="keyword">self</span>.paperRect.size.height - <span class="built_in">CGRectGetMaxY</span>(<span class="keyword">self</span>.printableRect), titleHeight);</span><br><span class="line"></span><br><span class="line"><span class="comment">// Just to be sure, never allow the content to go past our minimum margins for the content area.</span></span><br><span class="line">myFormatter.maximumContentWidth = <span class="keyword">self</span>.paperRect.size.width - <span class="number">2</span>*MIN_MARGIN;</span><br><span class="line">myFormatter.maximumContentHeight = <span class="keyword">self</span>.paperRect.size.height - <span class="number">2</span>*MIN_MARGIN;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">Let the superclass calculate the total number of pages. Since this UIPrintPageRenderer only uses a UIPrintFormatter, the superclass knows the number of pages based on the formatter metrics and the paper/printable rects.</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">Note that since this code only uses a single print formatter we could just as easily use myFormatter.pageCount to obtain the total number of pages. But it would be more complex than that if we had multiple printformatters for our job so we're using a more general approach here for illustration and it is correct for 1 or more formatters.</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="keyword">return</span> [<span class="keyword">super</span> numberOfPages];</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ul>
<li>准备绘制,绘制前会调用这个方法</li>
</ul>
<figure class="highlight objectivec"><table><tr><td class="code"><pre><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">Our pages don't have any intrinsic notion of page number; our footer will number the pages so that users know the order. So for us, we will always render the first page printed as page 1, even if the range is n-m. So we track which page in the range is the first index as well as the total length of our range.</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line">- (<span class="keyword">void</span>)prepareForDrawingPages:(<span class="built_in">NSRange</span>)range</span><br><span class="line">&#123;</span><br><span class="line">pageRange = range;</span><br><span class="line">[<span class="keyword">super</span> prepareForDrawingPages:range];</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ul>
<li>绘制页眉页脚</li>
</ul>
<figure class="highlight objectivec"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 绘制页眉</span></span><br><span class="line">- (<span class="keyword">void</span>)drawHeaderForPageAtIndex:(<span class="built_in">NSInteger</span>)pageIndex inRect:(<span class="built_in">CGRect</span>)headerRect &#123;</span><br><span class="line"><span class="comment">// Specify the header text.</span></span><br><span class="line"><span class="built_in">NSString</span> *headerText = <span class="string">@"第1次"</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// Set the desired font.</span></span><br><span class="line"><span class="built_in">UIFont</span> *font = [<span class="built_in">UIFont</span> systemFontOfSize:<span class="number">15</span>];</span><br><span class="line"><span class="comment">// Specify some text attributes we want to apply to the header text.</span></span><br><span class="line"><span class="built_in">NSDictionary</span> *textAttributes = @&#123;<span class="built_in">NSFontAttributeName</span>:font,<span class="built_in">NSForegroundColorAttributeName</span>:[<span class="built_in">UIColor</span> blackColor],<span class="built_in">NSKernAttributeName</span>:@<span class="number">7.5</span>&#125;;</span><br><span class="line"><span class="comment">// Calculate the text size.</span></span><br><span class="line"><span class="built_in">CGSize</span> textSize = [<span class="keyword">self</span> getTextSize:headerText font:font att:textAttributes];</span><br><span class="line"><span class="comment">// Determine the offset to the right side.</span></span><br><span class="line"><span class="built_in">CGFloat</span> offsetX = <span class="number">20.0</span>;</span><br><span class="line"><span class="comment">// Specify the point that the text drawing should start from.</span></span><br><span class="line"><span class="built_in">CGFloat</span> pointX = headerRect.size.width - textSize.width - offsetX;</span><br><span class="line"><span class="built_in">CGFloat</span> pointY = headerRect.size.height/<span class="number">2</span> - textSize.height/<span class="number">2</span>;</span><br><span class="line"><span class="comment">// Draw the header text.</span></span><br><span class="line">[headerText drawAtPoint:<span class="built_in">CGPointMake</span>(pointX, pointY) withAttributes:textAttributes];</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// 绘制页脚</span></span><br><span class="line">- (<span class="keyword">void</span>)drawFooterForPageAtIndex:(<span class="built_in">NSInteger</span>)pageIndex inRect:(<span class="built_in">CGRect</span>)footerRect &#123;</span><br><span class="line"><span class="built_in">NSString</span> *footerText = [<span class="built_in">NSString</span> stringWithFormat:<span class="string">@"第%lu页共%lu页"</span>,</span><br><span class="line">pageIndex+<span class="number">1</span> - pageRange.location, (<span class="keyword">unsigned</span> <span class="keyword">long</span>)pageRange.length];</span><br><span class="line"><span class="built_in">NSDictionary</span> *textAttributes = @&#123;<span class="built_in">NSFontAttributeName</span>:[<span class="built_in">UIFont</span> systemFontOfSize: <span class="number">15</span>] ,<span class="built_in">NSForegroundColorAttributeName</span>:[<span class="built_in">UIColor</span> blackColor],<span class="built_in">NSKernAttributeName</span>:@<span class="number">7.5</span>&#125;;</span><br><span class="line"><span class="built_in">CGSize</span> textSize = [<span class="keyword">self</span> getTextSize:footerText font:[<span class="built_in">UIFont</span> systemFontOfSize:<span class="number">15</span>] att:textAttributes];</span><br><span class="line"></span><br><span class="line"><span class="comment">//    CGFloat centerX = footerRect.size.width/2 - textSize.width/2;</span></span><br><span class="line"><span class="comment">//    CGFloat centerY = footerRect.origin.y + self.footerHeight/2 - textSize.height/2;</span></span><br><span class="line"><span class="comment">//</span></span><br><span class="line"><span class="comment">// Specify the point that the text drawing should start from.</span></span><br><span class="line"><span class="built_in">CGFloat</span> pointX = footerRect.size.width - textSize.width;</span><br><span class="line"><span class="built_in">CGFloat</span> pointY = footerRect.origin.y + <span class="keyword">self</span>.footerHeight/<span class="number">2</span>;</span><br><span class="line">[footerText drawAtPoint:<span class="built_in">CGPointMake</span>(pointX, pointY) withAttributes:textAttributes];</span><br><span class="line"></span><br><span class="line"><span class="comment">// Draw a horizontal line.</span></span><br><span class="line"><span class="built_in">CGFloat</span> lineOffsetX = <span class="number">20.0</span>;</span><br><span class="line"><span class="built_in">CGContextRef</span> context = <span class="built_in">UIGraphicsGetCurrentContext</span>();</span><br><span class="line"><span class="built_in">CGContextSetRGBStrokeColor</span>(context, <span class="number">205.0</span>/<span class="number">255.0</span>, <span class="number">205.0</span>/<span class="number">255.0</span>, <span class="number">205.0</span>/<span class="number">255</span>, <span class="number">1.0</span>);</span><br><span class="line"><span class="built_in">CGContextMoveToPoint</span>(context, lineOffsetX, footerRect.origin.y);</span><br><span class="line"><span class="built_in">CGContextAddLineToPoint</span>(context, footerRect.size.width - lineOffsetX, footerRect.origin.y);</span><br><span class="line"><span class="built_in">CGContextStrokePath</span>(context);</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// 计算字符串尺寸</span></span><br><span class="line">- (<span class="built_in">CGSize</span> )getTextSize:(<span class="built_in">NSString</span> *)text font:(<span class="built_in">UIFont</span> *)font att:(<span class="built_in">NSDictionary</span> *)att &#123;</span><br><span class="line"></span><br><span class="line"><span class="built_in">UILabel</span> *testLabel = [[<span class="built_in">UILabel</span> alloc] initWithFrame:<span class="built_in">CGRectMake</span>(<span class="number">0</span>, <span class="number">0</span>, <span class="keyword">self</span>.paperRect.size.width, <span class="keyword">self</span>.footerHeight)];</span><br><span class="line"><span class="keyword">if</span> (att) &#123;</span><br><span class="line"></span><br><span class="line">testLabel.attributedText = [[<span class="built_in">NSAttributedString</span> alloc] initWithString:text attributes:att];</span><br><span class="line">&#125;<span class="keyword">else</span> &#123;</span><br><span class="line">testLabel.text = text;</span><br><span class="line">testLabel.font = font;</span><br><span class="line">&#125;</span><br><span class="line">[testLabel sizeToFit];</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> testLabel.frame.size;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ul>
<li>其他方法</li>
</ul>
<figure class="highlight objectivec"><table><tr><td class="code"><pre><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">Compute an edge inset to produce the minimum margin based on the imageable area margin of the edge.</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="keyword">static</span> <span class="keyword">inline</span> <span class="built_in">CGFloat</span> EdgeInset(<span class="built_in">CGFloat</span> imageableAreaMargin)</span><br><span class="line">&#123;</span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">Because the offsets specified to a print formatter are relative to printRect and we want our edges to be at least MIN_MARGIN from the edge of the sheet of paper, here we compute the necessary offset to achieve our margin. If the imageable area margin is larger than our MIN_MARGIN, we return an offset of zero which means that the imageable area margin will be used.</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="built_in">CGFloat</span> val = MIN_MARGIN - imageableAreaMargin;</span><br><span class="line"><span class="keyword">return</span> val &gt; <span class="number">0</span> ? val : <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">Compute a height for the header or footer, based on the margin for the edge in question and the height of the text being drawn.</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="keyword">static</span> <span class="built_in">CGFloat</span> HeaderFooterHeight(<span class="built_in">CGFloat</span> imageableAreaMargin, <span class="built_in">CGFloat</span> textHeight)</span><br><span class="line">&#123;</span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">Make the header and footer height provide for a minimum margin of MIN_MARGIN. We want the content to appear at least MIN_HEADER_FOOTER_DISTANCE_FROM_CONTENT from the header/footer text. If that requires a margin &gt; MIN_MARGIN then we'll use that. Remember, the header/footer height returned needs to be relative to the edge of the imageable area.</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="built_in">CGFloat</span> headerFooterHeight = imageableAreaMargin + textHeight +</span><br><span class="line">MIN_HEADER_FOOTER_DISTANCE_FROM_CONTENT + HEADER_FOOTER_MARGIN_PADDING;</span><br><span class="line"><span class="keyword">if</span>(headerFooterHeight &lt; MIN_MARGIN)</span><br><span class="line">headerFooterHeight = MIN_MARGIN - imageableAreaMargin;</span><br><span class="line"><span class="keyword">else</span> &#123;</span><br><span class="line">headerFooterHeight -= imageableAreaMargin;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> headerFooterHeight;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="发送邮件"><a href="#发送邮件" class="headerlink" title="发送邮件"></a>发送邮件</h2><ul>
<li><p>包含头文件<code>#import &lt;MessageUI/MessageUI.h&gt;</code></p>
</li>
<li><p>发送邮件</p>
</li>
</ul>
<figure class="highlight objectivec"><table><tr><td class="code"><pre><span class="line"><span class="meta">#pragma mark - 设置邮件基本信息</span></span><br><span class="line"><span class="comment">// 设置邮件基本信息</span></span><br><span class="line">-(<span class="keyword">void</span>)displayComposerSheet</span><br><span class="line">&#123;</span><br><span class="line">MFMailComposeViewController *picker = [[MFMailComposeViewController alloc] init];</span><br><span class="line">picker.mailComposeDelegate = <span class="keyword">self</span>;</span><br><span class="line"><span class="comment">//设置主题</span></span><br><span class="line">[picker setSubject:<span class="string">@"HTMLDemo"</span>];</span><br><span class="line"></span><br><span class="line"><span class="comment">//设置收件人</span></span><br><span class="line"><span class="built_in">NSArray</span> *toRecipients = [<span class="built_in">NSArray</span> arrayWithObjects:<span class="string">@"xxxx@163.com"</span>,<span class="literal">nil</span>];</span><br><span class="line"></span><br><span class="line">[picker setToRecipients:toRecipients];</span><br><span class="line"></span><br><span class="line"><span class="comment">//设置附件为pdf</span></span><br><span class="line"><span class="built_in">NSData</span> *myData = [<span class="built_in">NSData</span> dataWithContentsOfFile:<span class="keyword">self</span>.pdfFileName];</span><br><span class="line"><span class="keyword">if</span> (myData) &#123;</span><br><span class="line">[picker addAttachmentData:myData mimeType:<span class="string">@"application/pdf"</span> fileName:<span class="string">@"HTMLDemo"</span>];</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 设置邮件发送内容</span></span><br><span class="line"><span class="built_in">NSString</span> *emailBody = <span class="string">@"哈哈尽快哈就合法进口分哈萨克黄齑淡饭"</span>;</span><br><span class="line">[picker setMessageBody:emailBody isHTML:<span class="literal">NO</span>];</span><br><span class="line"></span><br><span class="line"><span class="comment">//邮件发送的模态窗口</span></span><br><span class="line">[<span class="keyword">self</span> presentViewController:picker animated:<span class="literal">YES</span> completion:<span class="literal">nil</span>];</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ul>
<li>回调信息</li>
</ul>
<figure class="highlight objectivec"><table><tr><td class="code"><pre><span class="line"><span class="meta">#pragma mark - MFMailComposeViewControllerDelegate</span></span><br><span class="line">-(<span class="keyword">void</span>)mailComposeController:(MFMailComposeViewController *)controller didFinishWithResult:(MFMailComposeResult)result error:(<span class="built_in">NSError</span> *)error</span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">switch</span> (result)</span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">case</span> MFMailComposeResultCancelled: <span class="comment">//取消</span></span><br><span class="line"><span class="built_in">NSLog</span>(<span class="string">@"MFMailComposeResultCancelled-取消"</span>);</span><br><span class="line"><span class="keyword">break</span>;</span><br><span class="line"><span class="keyword">case</span> MFMailComposeResultSaved: <span class="comment">// 保存</span></span><br><span class="line"><span class="built_in">NSLog</span>(<span class="string">@"MFMailComposeResultSaved-保存邮件"</span>);</span><br><span class="line"><span class="keyword">break</span>;</span><br><span class="line"><span class="keyword">case</span> MFMailComposeResultSent: <span class="comment">// 发送</span></span><br><span class="line"><span class="built_in">NSLog</span>(<span class="string">@"MFMailComposeResultSent-发送邮件"</span>);</span><br><span class="line"><span class="keyword">break</span>;</span><br><span class="line"><span class="keyword">case</span> MFMailComposeResultFailed: <span class="comment">// 尝试保存或发送邮件失败</span></span><br><span class="line"><span class="built_in">NSLog</span>(<span class="string">@"MFMailComposeResultFailed: %@..."</span>,[error localizedDescription]);</span><br><span class="line"><span class="keyword">break</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 关闭邮件发送视图</span></span><br><span class="line">[<span class="keyword">self</span> dismissViewControllerAnimated:<span class="literal">YES</span> completion:<span class="literal">nil</span>];</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="数据传递过程"><a href="#数据传递过程" class="headerlink" title="数据传递过程"></a>数据传递过程</h2><ul>
<li>录入数据-&gt;传递数据到html模板-&gt;生成html-&gt;打印</li>
</ul>
<h3 id="1、录入数据"><a href="#1、录入数据" class="headerlink" title="1、录入数据"></a>1、录入数据</h3><ul>
<li>这个demo，暂时写死吧，如果需要的话，直接保存为模型，传递模型就行啦。</li>
</ul>
<h3 id="2、传递数据"><a href="#2、传递数据" class="headerlink" title="2、传递数据"></a>2、传递数据</h3><ul>
<li>将模型传递过来后，要对模型数据进行处理，这里直接使用简单粗暴的方式<code>stringByReplacingOccurrencesOfString: withString:</code> ，读取html后直接替换</li>
</ul>
<h3 id="3、生成html"><a href="#3、生成html" class="headerlink" title="3、生成html"></a>3、生成html</h3><ul>
<li>生成完毕后加载webView直接预览</li>
</ul>
<h3 id="4、打印html"><a href="#4、打印html" class="headerlink" title="4、打印html"></a>4、打印html</h3><ul>
<li>直接调用<code>printWebPage</code>方法进行打印</li>
</ul>
<h2 id="打印html"><a href="#打印html" class="headerlink" title="打印html"></a>打印html</h2><ul>
<li>打印html</li>
<li>想要绘制页眉页脚，以及其他信息，可以重写一些方法。</li>
</ul>
<figure class="highlight objectivec"><table><tr><td class="code"><pre><span class="line"><span class="meta">#pragma mark - 打印html</span></span><br><span class="line"><span class="comment">// 打印html</span></span><br><span class="line">- (<span class="keyword">void</span>)printWebPage</span><br><span class="line">&#123;</span><br><span class="line"><span class="built_in">UIPrintInteractionController</span> *controller = [<span class="built_in">UIPrintInteractionController</span> sharedPrintController];</span><br><span class="line"><span class="keyword">if</span>(!controller)&#123;</span><br><span class="line"><span class="built_in">NSLog</span>(<span class="string">@"Couldn't get shared UIPrintInteractionController!"</span>);</span><br><span class="line"><span class="keyword">return</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="built_in">UIPrintInteractionCompletionHandler</span> completionHandler =</span><br><span class="line">^(<span class="built_in">UIPrintInteractionController</span> *printController, <span class="built_in">BOOL</span> completed, <span class="built_in">NSError</span> *error) &#123;</span><br><span class="line"><span class="keyword">if</span>(!completed &amp;&amp; error)&#123;</span><br><span class="line"><span class="built_in">NSLog</span>(<span class="string">@"FAILED! due to error in domain %@ with error code %ld"</span>, error.domain, (<span class="keyword">long</span>)error.code);</span><br><span class="line">&#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">// 设置打印机的一些默认信息</span></span><br><span class="line"><span class="built_in">UIPrintInfo</span> *printInfo = [<span class="built_in">UIPrintInfo</span> printInfo];</span><br><span class="line"><span class="comment">// 输出类型</span></span><br><span class="line">printInfo.outputType = <span class="built_in">UIPrintInfoOutputGeneral</span>;</span><br><span class="line"><span class="comment">// 打印队列名称</span></span><br><span class="line">printInfo.jobName = <span class="string">@"HtmlDemo"</span>;</span><br><span class="line"><span class="comment">// 是否单双面打印</span></span><br><span class="line">printInfo.duplex = <span class="built_in">UIPrintInfoDuplexLongEdge</span>;</span><br><span class="line"><span class="comment">// 设置默认打印信息</span></span><br><span class="line">controller.printInfo = printInfo;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 显示页码范围</span></span><br><span class="line">controller.showsPageRange = <span class="literal">YES</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 预览设置</span></span><br><span class="line">SLQPrintPageRenderer *myRenderer = [[SLQPrintPageRenderer alloc] init];</span><br><span class="line"></span><br><span class="line"><span class="comment">// To draw the content of each page, a UIViewPrintFormatter is used.</span></span><br><span class="line"><span class="comment">// 生成html格式</span></span><br><span class="line"><span class="built_in">UIViewPrintFormatter</span> *viewFormatter = [<span class="keyword">self</span>.webView viewPrintFormatter];</span><br><span class="line">[myRenderer addPrintFormatter:viewFormatter startingAtPageAtIndex:<span class="number">0</span>];</span><br><span class="line"><span class="comment">// 渲染html</span></span><br><span class="line">controller.printPageRenderer = myRenderer;</span><br><span class="line"></span><br><span class="line">[controller presentAnimated:<span class="literal">YES</span> completionHandler:completionHandler];</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<blockquote>
<p><a href="https://github.com/slq0378/HtmlDemo.git" target="_blank" rel="noopener">Demo地址</a></p>
<p><a href="http://www.appcoda.com/pdf-generation-ios/" target="_blank" rel="noopener">参考文章</a></p>
</blockquote>
  
	</div>
		<footer class="article-footer clearfix">
<div class="article-catetags">


  <div class="article-tags">
  
  <span></span> <a href="/tags/HTML/">HTML</a>
  </div>

</div>



	<div class="article-share" id="share">
	
	  <div data-url="http://songliquan.github.io/2017/03/27/iOS中如何使用HTML进行打印/" data-title="iOS中如何使用HTML进行打印 | Bloging" data-tsina="undefined" class="share clearfix">
	  </div>
	
	</div>


</footer>

   	       
	</article>
	
<nav class="article-nav clearfix">
 
 <div class="prev" >
 <a href="/2017/04/18/双向认证/" title="HTTPS双向认证">
  <strong>上一篇：</strong><br/>
  <span>
  HTTPS双向认证</span>
</a>
</div>


<div class="next">
<a href="/2017/03/08/Mac上Git服务器搭建/"  title="Mac上Git服务器搭建">
 <strong>下一篇：</strong><br/> 
 <span>Mac上Git服务器搭建
</span>
</a>
</div>

</nav>

	
<section id="comments" class="comment">
	<div class="ds-thread" data-thread-key="2017/03/27/iOS中如何使用HTML进行打印/" data-title="iOS中如何使用HTML进行打印" data-url="http://songliquan.github.io/2017/03/27/iOS中如何使用HTML进行打印/"></div>
</section>


</div>  
      <div class="openaside"><a class="navbutton" href="#" title="显示侧边栏"></a></div>

  <div id="toc" class="toc-aside">
  <strong class="toc-title">文章目录</strong>
 
 <ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#iOS中如何使用HTML进行打印"><span class="toc-number">1.</span> <span class="toc-text">iOS中如何使用HTML进行打印</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#iOS中用于打印的类"><span class="toc-number">1.1.</span> <span class="toc-text">iOS中用于打印的类</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#重写UIPrintPageRenderer"><span class="toc-number">1.2.</span> <span class="toc-text">重写UIPrintPageRenderer</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#发送邮件"><span class="toc-number">1.3.</span> <span class="toc-text">发送邮件</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#数据传递过程"><span class="toc-number">1.4.</span> <span class="toc-text">数据传递过程</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1、录入数据"><span class="toc-number">1.4.1.</span> <span class="toc-text">1、录入数据</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2、传递数据"><span class="toc-number">1.4.2.</span> <span class="toc-text">2、传递数据</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3、生成html"><span class="toc-number">1.4.3.</span> <span class="toc-text">3、生成html</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4、打印html"><span class="toc-number">1.4.4.</span> <span class="toc-text">4、打印html</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#打印html"><span class="toc-number">1.5.</span> <span class="toc-text">打印html</span></a></li></ol></li></ol>
 
  </div>

<div id="asidepart">
<div class="closeaside"><a class="closebutton" href="#" title="隐藏侧边栏"></a></div>
<aside class="clearfix">

  
<div class="github-card">
<p class="asidetitle">Github 名片</p>
<div class="github-card" data-github="slq0378" data-width="220" data-height="119" data-theme="medium">
<script type="text/javascript" src="//cdn.jsdelivr.net/github-cards/latest/widget.js" ></script>
</div>
  </div>



  

  
<div class="tagslist">
	<p class="asidetitle">标签</p>
		<ul class="clearfix">
		
			
				<li><a href="/tags/OC/" title="OC">OC<sup>18</sup></a></li>
			
		
			
				<li><a href="/tags/swift/" title="swift">swift<sup>4</sup></a></li>
			
		
			
				<li><a href="/tags/iOS/" title="iOS">iOS<sup>3</sup></a></li>
			
		
			
				<li><a href="/tags/Vue/" title="Vue">Vue<sup>2</sup></a></li>
			
		
			
				<li><a href="/tags/CocoaPods/" title="CocoaPods">CocoaPods<sup>1</sup></a></li>
			
		
			
				<li><a href="/tags/Git/" title="Git">Git<sup>1</sup></a></li>
			
		
			
				<li><a href="/tags/ios/" title="ios">ios<sup>1</sup></a></li>
			
		
			
				<li><a href="/tags/oc/" title="oc">oc<sup>1</sup></a></li>
			
		
			
				<li><a href="/tags/Xcode/" title="Xcode">Xcode<sup>1</sup></a></li>
			
		
			
				<li><a href="/tags/HTML/" title="HTML">HTML<sup>1</sup></a></li>
			
		
			
				<li><a href="/tags/iOS-UIImage/" title="iOS,UIImage">iOS,UIImage<sup>1</sup></a></li>
			
		
		</ul>
</div>


  <div class="linkslist">
  <p class="asidetitle">友情链接</p>
    <ul>
        
          <li>
            
            	<a href="https://www.cnblogs.com/songliquan/" target="_blank" title="博客园 Blog">博客园 Blog</a>
            
          </li>
        
    </ul>
</div>

</aside>
</div>
    </div>
    <footer><div id="footer" >
	
	<div class="line">
		<span></span>
		<div class="author"></div>
	</div>
	
	
	<section class="info">
		<p> To be or not to be, This is a question. <br/>
			Do what you want.</p>
	</section>
	 
	<div class="social-font" class="clearfix">
		
		
		<a href="https://github.com/slq0378" target="_blank" class="icon-github" title="github"></a>
		
		
		
		
		
		
		<a href="https://www.douban.com/people/72784204" target="_blank" class="icon-douban" title="豆瓣"></a>
		
		
		<a href="http://www.zhihu.com/people/song88" target="_blank" class="icon-zhihu" title="知乎"></a>
		
		
		
		<a href="mailto:slq0378@163.com" target="_blank" class="icon-email" title="Email Me"></a>
		
	</div>
			
		

		<p class="copyright">
		Powered by <a href="http://hexo.io" target="_blank" title="hexo">hexo</a> and Theme by <a href="https://github.com/wuchong/jacman" target="_blank" title="Jacman">Jacman</a> © 2020 
		
		<a href="/about" target="_blank" title="Mr Song">Mr Song</a>
		
		
		</p>
</div>
</footer>
    <script src="/js/jquery-2.0.3.min.js"></script>
<script src="/js/jquery.imagesloaded.min.js"></script>
<script src="/js/gallery.js"></script>
<script src="/js/jquery.qrcode-0.12.0.min.js"></script>

<script type="text/javascript">
$(document).ready(function(){ 
  $('.navbar').click(function(){
    $('header nav').toggleClass('shownav');
  });
  var myWidth = 0;
  function getSize(){
    if( typeof( window.innerWidth ) == 'number' ) {
      myWidth = window.innerWidth;
    } else if( document.documentElement && document.documentElement.clientWidth) {
      myWidth = document.documentElement.clientWidth;
    };
  };
  var m = $('#main'),
      a = $('#asidepart'),
      c = $('.closeaside'),
      o = $('.openaside');
  c.click(function(){
    a.addClass('fadeOut').css('display', 'none');
    o.css('display', 'block').addClass('fadeIn');
    m.addClass('moveMain');
  });
  o.click(function(){
    o.css('display', 'none').removeClass('beforeFadeIn');
    a.css('display', 'block').removeClass('fadeOut').addClass('fadeIn');      
    m.removeClass('moveMain');
  });
  $(window).scroll(function(){
    o.css("top",Math.max(80,260-$(this).scrollTop()));
  });
  
  $(window).resize(function(){
    getSize(); 
    if (myWidth >= 1024) {
      $('header nav').removeClass('shownav');
    }else{
      m.removeClass('moveMain');
      a.css('display', 'block').removeClass('fadeOut');
      o.css('display', 'none');
      
      $('#toc.toc-aside').css('display', 'none');
        
    }
  });
});
</script>

<script type="text/javascript">
$(document).ready(function(){ 
  var ai = $('.article-content>iframe'),
      ae = $('.article-content>embed'),
      t  = $('#toc'),
      ta = $('#toc.toc-aside'),
      o  = $('.openaside'),
      c  = $('.closeaside');
  if(ai.length>0){
    ai.wrap('<div class="video-container" />');
  };
  if(ae.length>0){
   ae.wrap('<div class="video-container" />');
  };
  c.click(function(){
    ta.css('display', 'block').addClass('fadeIn');
  });
  o.click(function(){
    ta.css('display', 'none');
  });
  $(window).scroll(function(){
    ta.css("top",Math.max(140,320-$(this).scrollTop()));
  });
});
</script>


<script type="text/javascript">
$(document).ready(function(){ 
  var $this = $('.share'),
      url = $this.attr('data-url'),
      encodedUrl = encodeURIComponent(url),
      title = $this.attr('data-title'),
      tsina = $this.attr('data-tsina'),
      description = $this.attr('description');
  var html = [
  '<div class="hoverqrcode clearfix"></div>',
  '<a class="overlay" id="qrcode"></a>',
  '<a href="https://www.facebook.com/sharer.php?u=' + encodedUrl + '" class="article-share-facebook" target="_blank" title="Facebook"></a>',
  '<a href="https://twitter.com/intent/tweet?url=' + encodedUrl + '" class="article-share-twitter" target="_blank" title="Twitter"></a>',
  '<a href="#qrcode" class="article-share-qrcode" title="微信"></a>',
  '<a href="http://widget.renren.com/dialog/share?resourceUrl=' + encodedUrl + '&srcUrl=' + encodedUrl + '&title=' + title +'" class="article-share-renren" target="_blank" title="人人"></a>',
  '<a href="http://service.weibo.com/share/share.php?title='+title+'&url='+encodedUrl +'&ralateUid='+ tsina +'&searchPic=true&style=number' +'" class="article-share-weibo" target="_blank" title="微博"></a>',
  '<span title="Share to"></span>'
  ].join('');
  $this.append(html);

  $('.hoverqrcode').hide();

  var myWidth = 0;
  function updatehoverqrcode(){
    if( typeof( window.innerWidth ) == 'number' ) {
      myWidth = window.innerWidth;
    } else if( document.documentElement && document.documentElement.clientWidth) {
      myWidth = document.documentElement.clientWidth;
    };
    var qrsize = myWidth > 1024 ? 200:100;
    var options = {render: 'image', size: qrsize, fill: '#2ca6cb', text: url, radius: 0.5, quiet: 1};
    var p = $('.article-share-qrcode').position();
    $('.hoverqrcode').empty().css('width', qrsize).css('height', qrsize)
                          .css('left', p.left-qrsize/2+20).css('top', p.top-qrsize-10)
                          .qrcode(options);
  };
  $(window).resize(function(){
    $('.hoverqrcode').hide();
  });
  $('.article-share-qrcode').click(function(){
    updatehoverqrcode();
    $('.hoverqrcode').toggle();
  });
  $('.article-share-qrcode').hover(function(){}, function(){
      $('.hoverqrcode').hide();
  });
});   
</script>



<script type="text/javascript">
  var duoshuoQuery = {short_name:"Song"};
  (function() {
    var ds = document.createElement('script');
    ds.type = 'text/javascript';ds.async = true;
    ds.src = '//static.duoshuo.com/embed.js';
    ds.charset = 'UTF-8';
    (document.getElementsByTagName('head')[0] 
    || document.getElementsByTagName('body')[0]).appendChild(ds);
  })();
</script> 







<link rel="stylesheet" href="/fancybox/jquery.fancybox.css" media="screen" type="text/css">
<script src="/fancybox/jquery.fancybox.pack.js"></script>
<script type="text/javascript">
$(document).ready(function(){ 
  $('.article-content').each(function(i){
    $(this).find('img').each(function(){
      if ($(this).parent().hasClass('fancybox')) return;
      var alt = this.alt;
      if (alt) $(this).after('<span class="caption">' + alt + '</span>');
      $(this).wrap('<a href="' + this.src + '" title="' + alt + '" class="fancybox"></a>');
    });
    $(this).find('.fancybox').each(function(){
      $(this).attr('rel', 'article' + i);
    });
  });
  if($.fancybox){
    $('.fancybox').fancybox();
  }
}); 
</script>



<!-- Analytics Begin -->

<script type="text/javascript">
(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
})(window,document,'script','//www.google-analytics.com/analytics.js','ga');
ga('create', 'UA-68091434-1', 'auto');  
ga('send', 'pageview');
</script>





<!-- Analytics End -->

<!-- Totop Begin -->

	<div id="totop">
	<a title="返回顶部"><img src="/img/scrollup.png"/></a>
	</div>
	<script src="/js/totop.js"></script>

<!-- Totop End -->

<!-- MathJax Begin -->
<!-- mathjax config similar to math.stackexchange -->


<!-- MathJax End -->

<!-- Tiny_search Begin -->

<!-- Tiny_search End -->

  </body>
</html>
